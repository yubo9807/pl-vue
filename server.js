"use strict";var ft=Object.defineProperty;var pt=(t,e,n)=>e in t?ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var f=(t,e,n)=>(pt(t,typeof e!="symbol"?e+"":e,n),n);const dt=require("http"),G=require("fs"),$=require("path"),ht=require("axios-minified");function E(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function y(t){return["object","array"].includes(E(t))}function mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function z(t,e){if(y(t)&&y(e)){const n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(const r of n)if(!o.includes(r)||!z(t[r],e[r]))return!1;return!0}else return t===e}function J(){return typeof window=="object"}function Y(t){return E(t)==="object"}function Q(t){return Array.isArray(t)}function X(t){return typeof t=="string"}function D(t){Promise.resolve().then(t)}let S=null;const A=new WeakMap;function yt(t){S=t,t(),S=null}function gt(t){const e=A.get(t)||[],n=e.some(o=>S===o);S&&!n&&(e.push(S),A.set(t,e))}function V(t){const e=A.get(t);e&&e.forEach((n,o)=>{n()===!0&&(e.splice(o,1),A.set(t,e))})}const bt=new WeakMap,x=new WeakMap,P={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function q(t){if(!y(t)||Object.isFrozen(t)||bt.get(t))return t;let e=null;return new Proxy(t,{get(n,o,r){if(o===P.RAW)return n;if(y(n[o]))return q(n[o]);const s=Reflect.get(n,o,r);return gt(n),s},set(n,o,r,s){if(n[P.IS_READONLY])return!0;if(y(n[o])){const v=n[o],H=new Set;for(const g in r)H.add(g),this.set(v,g,r[g],s[o]);for(const g in v)H.has(g)||this.deleteProperty(v,g);return!0}if(Reflect.get(n,o,s)===r)return!0;const a=Reflect.set(n,o,r,s),l=x.get(n)||new Set;l.add(o);const lt=l.size;return x.set(n,l),D(()=>{const v=Reflect.get(n,o,s);a&&v===r&&lt===1&&V(n),x.delete(n)}),a},deleteProperty(n,o){const r=Reflect.get(n,o);if(y(r)){for(const a in r)this.deleteProperty(r,a);return!0}const s=mt(n,o),i=Reflect.deleteProperty(n,o);return e=o,D(()=>{s&&i&&r!==void 0&&o===e&&(V(n),e=null)}),i}})}function wt(t){return!!t[P.RAW]}function Z(t){return wt(t)?t[P.RAW]:t}function vt(t){const e=q({value:t});function n(){return e.value}function o(r){e.value=r}return[n,o]}const St="__v_isRef";var Se;class Rt{constructor(e){f(this,Se,!0);f(this,"__v_isShallow",!1);f(this,"_rawValue");f(this,"_value");f(this,"getSignal");f(this,"setSignal");this._rawValue=e;const[n,o]=vt(e);this.getSignal=n,this.setSignal=o,this._value=n()}get value(){return this.getSignal()}set value(e){this.setSignal(e),this._rawValue=e}}Se=St;function b(t){return new Rt(t)}const R=function(){const t=new WeakMap,e=["null","weakset","weakmap"],n={set(o){const r=new Set;for(const s of o)r.add(R(s));return r},map(o){const r=new Map;for(const[s,i]of o.entries())r.set(s,R(i));return r}};return function(o){const r=E(o);if(typeof o!="object"||e.includes(r))return o;if(t.has(o))return t.get(o);if(n[r])return n[r](o);const s=Q(o)?[]:{};Object.setPrototypeOf(s,Object.getPrototypeOf(o)),t.set(o,s);for(const i in o)s[i]=R(o[i]);return s}}();function F(t,e){return Object.assign({},t,e)}function _t(t,e,n={}){let o=!1;if(o)return;const r=t();n.immediate&&e(r,void 0);let s=R(r),i=!0;return yt(()=>{if(o)return!0;const a=t();if(y(a)){n.deep&&!z(a,s)&&(e(a,s),s=R(a));return}if(i){i=!1;return}a!==s&&(e(a,s),s=a)}),()=>{o=!0}}function jt(t){return["string","number"].includes(typeof t)&&t!==""}function Nt(t){return!/^on/.test(t)}function tt(t){return typeof t=="function"&&!et(t)}function c(t,e,...n){const o={tag:t,attrs:e||{},children:n};return tt(o.tag)&&o.children.length===0&&o.attrs.children&&(o.children=o.attrs.children),o}function C({children:t}){return t}const O=Symbol("Fragment");C.prototype[O]=O;function et(t){return typeof t=="function"&&t.prototype[O]===O}function T(t,e={},n=[""]){if(et(t)){const s=F(e,{children:n}),i=t(s);return U(i)}if(tt(t)){const s=F(e,{children:n}),i=t(s);return T(i.tag,i.attrs,i.children)}let o="";for(const s in e){if(s.startsWith("on")||s==="ref")continue;let i=typeof e[s]=="function"&&Nt(s)?e[s]():e[s];if(s==="className"){o+=` class=${i}`;continue}if(s==="style"&&Y(i)){for(const a in i)typeof i[a]=="function"&&(i[a]=i[a]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}o+=` ${s}=${i}`}const r=U(n);return`<${t}${o}>${r}</${t}>`}function U(t){let e="";return t.forEach(n=>{if(jt(n)){e+=n.toString();return}if(Q(n)){e+=U(n);return}if(typeof n=="function"){const o=n();e+=U([o]);return}if(Y(n)){e+=T(n.tag,n.attrs,n.children);return}}),e}function At({tag:t,attrs:e,children:n}){return T(t,e,n)}function k(t){const e=new URL("http://0.0.0.0"+t),n=e.pathname,o=u.routes.find(r=>n.startsWith(r.path+"/")&&r.exact===!1);return{monitor:o?o.path:n,fullPath:e.href.replace(e.origin,""),path:n,query:Pt(e.search),hash:e.hash}}function M(t){if(X(t))return t;t=t;const e=t.path;let n="";for(const s in t.query)n+=`&${s}=${t.query[s]}`;n=n?"?"+n:"";const o=t.hash?"#"+t.hash:"";return e+n+o}function Pt(t){const e={};return t.replace("?","").split("&").forEach(o=>{const[r,s]=o.split("=");r&&s&&(e[r]=s)}),e}function nt(){return u.mode==="history"?location.href.replace(location.origin+u.base,""):location.hash.slice(1)}function B(t){return u.routes.find(e=>e.path===t)}function ot(t){const e=M(t);u.mode==="history"?history.pushState({},"",u.base+e):location.hash=e,L(e)}function rt(t){const e=M(t);u.mode==="history"?history.replaceState({},"",u.base+e):location.hash=e,L(e)}function N(t){history.go(t)}function Ot(){return{push:ot,replace:rt,go:N}}const u={base:"",mode:"history",ssrDataKey:"g_initialProps",routes:[]};let d=null;function Ut(t={}){if(Object.assign(u,t),J()){const e=k(nt());d=q(e)}else d??(d=k("/"));return{back:()=>N(-1),forward:()=>N(1),go:N,push:ot,replace:rt,options:u,currentRoute:Z(d)}}function L(t){const e=k(t);for(const n in e)d[n]=e[n]}function kt(){return d}function Lt(t){window.addEventListener("popstate",()=>{L(nt())});const e=b(null);let n;return _t(()=>d.monitor,async o=>{const r=B(o);if(!r)return;const{getInitialProps:s}=r.component.prototype;if(typeof s=="function")if(window[u.ssrDataKey])n=window[u.ssrDataKey],delete window[u.ssrDataKey];else{e.value=t.loading;const i=Z(d);n=await s(i)}e.value=r.component},{immediate:!0}),c(C,null,()=>e.value&&c(e.value,{data:n}))}function xt(t){let e="";if(u.mode==="history")e=t.url.replace(u.base,"");else{const o=t.url.match(/#.*/);e=o?o[0]:""}L(e);const n=B(d.monitor);return c(C,null,n&&c(n.component,{data:t.data}))}async function $t(t){const e=k(t),n=B(e.monitor);if(!n)return;const{getInitialProps:o}=n.component.prototype;if(typeof o=="function")return await o(e)}function Ft(t){return J()?c(Lt,{...t}):c(xt,{...t})}const It={to:"/",type:"push"};function _(t){t=F(It,t);const e=X(t.to)?t.to:M(t.to),n=u.base+(u.mode==="hash"?"#"+e:e),o=Ot();function r(s){s.preventDefault(),t.type==="push"?o.push(e):o.replace(e)}return c("a",{className:t.className,href:n,onclick:r},t.children)}const Et="production",h=Object.freeze({BASE_URL:"",NODE_ENV:Et,BASE_API:"http://hicky.hpyyb.cn/api",GITHUB_URL:"https://github.com/yubo9807/"}),qt="banner-64e93c",Ct="box-e24f47",Tt="bg-a171c3",Mt="blend-4c743b",Bt="btn-05bf70",Ht="enter-825ce4",Dt="article-e5ab12",Vt="paragraph-6f9bd7",Wt="mark-66b760",Kt="peculiarity-fd110f",p={banner:qt,box:Ct,bg:Tt,blend:Mt,btn:Bt,enter:Ht,article:Dt,paragraph:Vt,mark:Wt,peculiarity:Kt},Gt="main-67f0a8",zt={main:Gt},Jt="header-ada874",Yt="navigation-0bbde6",W={header:Jt,navigation:Yt};function Qt(){return c("header",{className:W.header},c("div",null,c(_,{to:"/"},c("h1",null,"Pl Vue"))),c("nav",{className:W.navigation},c(_,{to:"/docs"},"文档"),c("a",{href:h.GITHUB_URL+"mvvm_vue3",target:"_blank"},"GitHub")))}const Xt="footer-967a98",Zt={footer:Xt};function te(){return c("footer",{className:Zt.footer},c("strong",null,"⚠️ 注意事项"),c("p",null,"本文文档仅供学习参考。并未发布正式版本，不提供任何商业用途。"))}function st(t){return c("div",null,c(Qt,null),c("main",{className:zt.main},t.children),c(te,null))}function w(...t){return t.join(" ").trim().replace(/\s+/," ")}const I={"text/html":[".html"],"text/css":[".css"],"application/javascript;":[".js"],"application/json":[".json"],"image/vnd.microsoft.icon":[".ico"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"font/woff2":[".worf2"],"font/woff":[".worf"],"font/ttf":[".ttf"],"application/octet-stream":[".mp4",".avi"]};function ee(){const t=Object.values(I).flat();return[".gz"].concat(t)}function ne(t){t=t.toLowerCase();let e=null;for(const n in I)if(I[n].includes(t)){e=n;break}return e}function ct(){return c(st,null,c("div",{className:p.banner},c("div",{className:p.box},c("div",{className:p.bg},c("strong",null,"Pl Vue"),c("p",null,"一个 JS 库，只关心数据与函数之间的联动")),c(_,{className:p.btn,to:"/docs/reactivity"},"API 参考"))),c("article",{className:w("leayer","module-gap",p.article)},c("p",{className:p.paragraph},"一个轻量级、不依赖任何第三方库的 JS 数据响应式库，除响应式 API 外，该库还提供了组件化、挂载钩子、Router、Store 以及服务端渲染相关 API，项目搭建可参考  ",c("a",{href:h.GITHUB_URL+"mvvm_vue3"},"GitHub"),"。"),c("p",{className:p.mark},"该库本身与 Vue 框架无任何关系，只是多数 API 在命名上相同而已。")),c("ul",{className:w("leayer","module-gap",p.peculiarity)},c("li",null,c("h2",null,"响不响应式的，高度交予开发者决定"),c("p",null,"JSX 编程方式，响应式数据统一使用函数的方式包裹。",c(_,{to:"/docs/intro"},"了解更多"))),c("li",null,c("h2",null,"无虚拟 DOM 参与"),c("p",null,"将用到响应式数据的函数进行收集，在数据更新后执行相应的函数。因此直接省去了虚拟 DOM 的比较。")),c("li",null,c("h2",null,"拿来就用，灵活多变"),c("p",null,"无需脚手架，原生应用亦可构建。",c("a",{href:h.GITHUB_URL+"single-page",target:"_blank"},"代码示例"))),c("li",null,c("h2",null,"代码精简，minify < 10k"),c("p",null,"手写 h 与 Fragment，将代码体积精简到极致。"))))}ct.prototype.getInitialProps=async()=>"home";const oe="container-4ac8c9",re="side-f9a8bf",se="active-889810",ce="content-a47edb",ie="show-side-a60745",m={container:oe,side:re,active:se,content:ce,"show-side":"show-side-a60745",showSide:ie};class ae{constructor(e){f(this,"config");f(this,"instance");this.config=e,this.instance=ht.create(e),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:o,config:r,message:s}=n;if(o&&o.data)return this.responseUse(o);const{url:i}=n.config;return Promise.reject({code:500,msg:s||"network error: "+i})})}requestUse(e){return e}responseUse(e){const n=e.data;return(this[n.code]||this.error)(e)}200(e){return Promise.resolve(e.data)}error(e){const{data:n,config:o}=e;return Promise.reject(n)}}function ue(t){return t.then(e=>[null,e]).catch(e=>[e,null])}class le extends ae{constructor(){super({baseURL:h.BASE_API,timeout:5e3})}}const fe=new le;function it(t){return ue(fe.instance(t))}function pe(){return it({url:"/file/read",params:{path:"/plvue/config.json"}})}function de(t){return it({url:"/file/read",params:{path:t}})}function at(t){const e=b(t.data.list),n=b(t.data.content),o=kt(),r=b(!1),s=b(i());function i(){return o.path.replace(o.monitor,"").slice(1)||e.value[0]&&e.value[0].value}const a=b(null);return c(st,null,c("div",{className:w("leayer",m.container)},c("ul",{className:()=>w(m.side,r.value?m.active:"")},e.value.map(l=>c("li",{className:()=>s.value===l.value?m.active:""},c(_,{to:`/docs/${l.value}`},l.label)))),c("div",{ref:a,className:w(m.content,"markdown")},c("div",{innerHTML:()=>n.value}))),c("div",{className:()=>w(m.showSide,r.value?m.active:""),onclick:()=>r.value=!r.value}))}at.prototype.getInitialProps=async t=>{const e=await he(),n=await me(t.path.replace(t.monitor,"")||e[0]&&e[0].value);return{list:e,content:n}};async function he(){const[t,e]=await pe(),n=[];if(t)return n;const o=JSON.parse(e.data.content);for(const r in o)n.push({label:o[r],value:r});return n}async function me(t){const[e,n]=await de(`/plvue/${t}.md`);return e?"":n.data.content}const ye="not-found-710606",ge={"not-found":"not-found-710606",notFound:ye};function be(){return c("div",{className:ge["not-found"]},"404")}Ut({base:h.BASE_URL,mode:"history",routes:[{path:"/",component:ct},{path:"/docs",component:at,exact:!1},{component:be}]});function we(t){return c(Ft,{url:t.url,data:t.data})}const ut=h.BASE_URL.slice(1),j=G.readFileSync($.resolve(__dirname,ut,"index.html"),"utf-8"),ve=dt.createServer(async(t,e)=>{const n=t.url.replace(h.BASE_URL||"/","/"),o=$.extname(n);if(ee().includes(o)){const r=$.resolve(__dirname,ut,n.slice(1));G.readFile(r,(s,i)=>{if(s)e.writeHead(404,{"Content-Type":"text/plain"}),e.end("Not Found");else{const a=ne(o);a&&e.setHeader("Content-Type",a),e.write(i),e.end()}})}else{const r=await $t(n),s=At(c(we,{url:n,data:r})),i=j.search("</body>"),a=r===void 0?"":`<script>window.g_initialProps=${JSON.stringify(r)}<\/script>`,l=j.slice(0,i)+a+j.slice(i,j.length);e.write(l.replace("<!--ssr-outlet-->",s)),e.end()}}),K=3e3;ve.listen(K,()=>{console.log(`http://localhost:${K}${h.BASE_URL}`)});
