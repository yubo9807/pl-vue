"use strict";var ht=Object.defineProperty;var mt=(t,e,n)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h=(t,e,n)=>(mt(t,typeof e!="symbol"?e+"":e,n),n);const yt=require("http"),Y=require("fs"),F=require("path"),gt=require("axios-minified");function M(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function w(t){return["object","array"].includes(M(t))}function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Q(t,e){if(w(t)&&w(e)){const n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(const s of n)if(!o.includes(s)||!Q(t[s],e[s]))return!1;return!0}else return t===e}function X(){return typeof window=="object"}function Z(t){return M(t)==="object"}function tt(t){return Array.isArray(t)}function et(t){return typeof t=="string"}function wt(t){return["string","number"].includes(typeof t)&&t!==""}function vt(t){return!/^on/.test(t)}function nt(t){return typeof t=="function"&&!ot(t)}function c(t,e,...n){const o={tag:t,attrs:e||{},children:n};return nt(o.tag)&&o.children.length===0&&o.attrs.children&&(o.children=o.attrs.children),o}function x({children:t}){return t}const P=Symbol("Fragment");x.prototype[P]=P;function ot(t){return typeof t=="function"&&t.prototype[P]===P}function K(t){Promise.resolve().then(t)}let _=null;const O=new WeakMap;function St(t){_=t,t(),_=null}function Rt(t){const e=O.get(t)||[],n=e.some(o=>_===o);_&&!n&&(e.push(_),O.set(t,e))}function G(t){const e=O.get(t);e&&e.forEach((n,o)=>{n()===!0&&(e.splice(o,1),O.set(t,e))})}const _t=new WeakMap,E=new WeakMap,U={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function H(t){if(!w(t)||Object.isFrozen(t)||_t.get(t))return t;let e=null;return new Proxy(t,{get(n,o,s){if(o===U.RAW)return n;if(w(n[o]))return H(n[o]);const r=Reflect.get(n,o,s);return Rt(n),r},set(n,o,s,r){if(n[U.IS_READONLY])return!0;if(w(n[o])){const f=n[o],W=new Set;for(const v in s)W.add(v),this.set(f,v,s[v],r[o]);for(const v in f)W.has(v)||this.deleteProperty(f,v);return!0}if(Reflect.get(n,o,r)===s)return!0;const a=Reflect.set(n,o,s,r),u=E.get(n)||new Set;u.add(o);const d=u.size;return E.set(n,u),K(()=>{const f=Reflect.get(n,o,r);a&&f===s&&d===1&&G(n),E.delete(n)}),a},deleteProperty(n,o){const s=Reflect.get(n,o);if(w(s)){for(const a in s)this.deleteProperty(s,a);return!0}const r=bt(n,o),i=Reflect.deleteProperty(n,o);return e=o,K(()=>{r&&i&&s!==void 0&&o===e&&(G(n),e=null)}),i}})}function jt(t){return!!t[U.RAW]}function rt(t){return jt(t)?t[U.RAW]:t}function Nt(t){const e=H({value:t});function n(){return e.value}function o(s){e.value=s}return[n,o]}const At="__v_isRef";var Ae;class Pt{constructor(e){h(this,Ae,!0);h(this,"__v_isShallow",!1);h(this,"_rawValue");h(this,"_value");h(this,"getSignal");h(this,"setSignal");this._rawValue=e;const[n,o]=Nt(e);this.getSignal=n,this.setSignal=o,this._value=n()}get value(){return this.getSignal()}set value(e){this.setSignal(e),this._rawValue=e}}Ae=At;function S(t){return new Pt(t)}const j=function(){const t=new WeakMap,e=["null","weakset","weakmap"],n={set(o){const s=new Set;for(const r of o)s.add(j(r));return s},map(o){const s=new Map;for(const[r,i]of o.entries())s.set(r,j(i));return s}};return function(o){const s=M(o);if(typeof o!="object"||e.includes(s))return o;if(t.has(o))return t.get(o);if(n[s])return n[s](o);const r=tt(o)?[]:{};Object.setPrototypeOf(r,Object.getPrototypeOf(o)),t.set(o,r);for(const i in o)r[i]=j(o[i]);return r}}();function I(t,e){return Object.assign({},t,e)}function Ot(t,e,n={}){let o=!1;if(o)return;const s=t();n.immediate&&e(s,void 0);let r=j(s),i=!0;return St(()=>{if(o)return!0;const a=t();if(w(a)){n.deep&&!Q(a,r)&&(e(a,r),r=j(a));return}if(i){i=!1;return}a!==r&&(e(a,r),r=a)}),()=>{o=!0}}function k(t){const e=new URL("http://0.0.0.0"+t),n=e.pathname,o=l.routes.find(s=>n.startsWith(s.path+"/")&&s.exact===!1);return{monitor:o?o.path:n,fullPath:e.href.replace(e.origin,""),path:n,query:Ut(e.search),hash:e.hash}}function B(t){if(et(t))return t;t=t;const e=t.path;let n="";for(const r in t.query)n+=`&${r}=${t.query[r]}`;n=n?"?"+n:"";const o=t.hash?"#"+t.hash:"";return e+n+o}function Ut(t){const e={};return t.replace("?","").split("&").forEach(o=>{const[s,r]=o.split("=");s&&r&&(e[s]=r)}),e}function st(){return l.mode==="history"?location.href.replace(location.origin+l.base,""):location.hash.slice(1)}function D(t){const{routes:e}=l,n=e.find(s=>s.path===t);if(n)return n;const o=e[e.length-1];if(o.path===void 0&&o.component)return o}function ct(t){const e=B(t);l.mode==="history"?history.pushState({},"",l.base+e):location.hash=e,L(e)}function it(t){const e=B(t);l.mode==="history"?history.replaceState({},"",l.base+e):location.hash=e,L(e)}function A(t){history.go(t)}function kt(){return{push:ct,replace:it,go:A}}const l={base:"",mode:"history",ssrDataKey:"g_initialProps",routes:[]};let y=null;function $t(t={}){if(Object.assign(l,t),X()){const e=k(st());y=H(e)}else y??(y=k("/"));return{back:()=>A(-1),forward:()=>A(1),go:A,push:ct,replace:it,options:l,currentRoute:rt(y)}}function L(t){const e=k(t);for(const n in e)y[n]=e[n]}function xt(){return y}function V(t,e={},n=[""]){if(ot(t)){const r=I(e,{children:n}),i=t(r);return $(i)}if(nt(t)){const r=I(e,{children:n}),i=t(r);return V(i.tag,i.attrs,i.children)}let o="";for(const r in e){if(r.startsWith("on")||r==="ref")continue;let i=typeof e[r]=="function"&&vt(r)?e[r]():e[r];if(r==="className"){o+=` class=${i}`;continue}if(r==="style"&&Z(i)){for(const a in i)typeof i[a]=="function"&&(i[a]=i[a]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}o+=` ${r}=${i}`}const s=$(n);return`<${t}${o}>${s}</${t}>`}function $(t){let e="";return t.forEach(n=>{if(wt(n)){e+=n.toString();return}if(tt(n)){e+=$(n);return}if(typeof n=="function"){const o=n();e+=$([o]);return}if(Z(n)){e+=V(n.tag,n.attrs,n.children);return}}),e}function at({tag:t,attrs:e,children:n}){return V(t,e,n)}let p="";function Lt(t){function e(n){const o=[],s=t.children.map(u=>(u.tag==="title"?o.push(new RegExp("<title")):u.tag==="meta"&&u.attrs.name&&o.push(new RegExp(`<meta name=("|')?${u.attrs.name}`)),at(u))),r=n.split(`
`),i=[];t:for(let u=0;u<r.length;u++){r[u]=r[u].trim();for(let d=0;d<o.length;d++)if(o[d].test(r[u])){i.push(u);continue t}}return r.push(...s),r.filter((u,d)=>!i.includes(d)).join(`
`)}if(p){const n=p.match(/\<head\>(.*)\<\/head>/s),o=e(n[1].trim());p=p.replace(/\<head\>.*\<\/head>/s,`<head>
${o}
</head>`)}return c(x,null)}let T,q="/";async function Et(t){const e=k(t),n=D(e.monitor);if(!n)return;const{getInitialProps:o}=n.component.prototype;if(typeof o=="function")return T=await o(e),T}function Ft(){let t="";if(l.mode==="history")t=q.replace(l.base,"");else{const n=q.match(/#.*/);t=n?n[0]:""}L(t);const e=D(y.monitor);return c(x,null,e&&c(e.component,{data:T}))}async function It(t,e,n){p=n,q=e;const o=await Et(e),s=at(c(t,null)),r=p.search("</body>"),i=o===void 0?"":`<script>window.${l.ssrDataKey}=${JSON.stringify(o)}<\/script>`;return p=p.slice(0,r)+i+p.slice(r,p.length),p.replace("<!--ssr-outlet-->",s)}function Tt(t){window.addEventListener("popstate",()=>{L(st())});const e=S(null);let n;return Ot(()=>y.monitor,async o=>{const s=D(o);if(!s)return;const{getInitialProps:r}=s.component.prototype;if(typeof r=="function")if(window[l.ssrDataKey])n=window[l.ssrDataKey],delete window[l.ssrDataKey];else{e.value=t.loading;const i=rt(y);n=await r(i)}e.value=s.component},{immediate:!0}),c(x,null,()=>e.value&&c(e.value,{data:n}))}function qt(t){return X()?c(Tt,{...t}):c(Ft,null)}const Ct={to:"/",type:"push"};function N(t){t=I(Ct,t);const e=et(t.to)?t.to:B(t.to),n=l.base+(l.mode==="hash"?"#"+e:e),o=kt();function s(r){r.preventDefault(),t.type==="push"?o.push(e):o.replace(e)}return c("a",{className:t.className,href:n,onclick:s},t.children)}const Mt="production",g=Object.freeze({BASE_URL:"",NODE_ENV:Mt,BASE_API:"http://127.0.0.1:20010/api",GITHUB_URL:"https://github.com/yubo9807/"}),Ht="banner-64e93c",Bt="box-e24f47",Dt="bg-a171c3",Vt="blend-4c743b",Wt="btn-05bf70",Kt="enter-825ce4",Gt="article-e5ab12",zt="paragraph-6f9bd7",Jt="mark-66b760",Yt="peculiarity-fd110f",m={banner:Ht,box:Bt,bg:Dt,blend:Vt,btn:Wt,enter:Kt,article:Gt,paragraph:zt,mark:Jt,peculiarity:Yt},Qt="main-67f0a8",Xt={main:Qt},Zt="header-ada874",te="navigation-0bbde6",z={header:Zt,navigation:te};function ee(){return c("header",{className:z.header},c("div",null,c(N,{to:"/"},c("h1",null,"Pl Vue"))),c("nav",{className:z.navigation},c(N,{to:"/docs"},"文档"),c("a",{href:g.GITHUB_URL+"mvvm_vue3",target:"_blank"},"GitHub")))}const ne="footer-967a98",oe={footer:ne};function re(){return c("footer",{className:oe.footer},c("strong",null,"⚠️ 注意事项"),c("p",null,"本文文档仅供学习参考。并未发布正式版本，不提供任何商业用途。"))}function ut(t){return c("div",null,c(ee,null),c("main",{className:Xt.main},t.children),c(re,null))}function R(...t){return t.join(" ").trim().replace(/\s+/," ")}const C={"text/html":[".html"],"text/css":[".css"],"application/javascript;":[".js"],"application/json":[".json"],"image/vnd.microsoft.icon":[".ico"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"font/woff2":[".worf2"],"font/woff":[".worf"],"font/ttf":[".ttf"],"application/octet-stream":[".mp4",".avi"]};function se(){const t=Object.values(C).flat();return[".gz"].concat(t)}function ce(t){t=t.toLowerCase();let e=null;for(const n in C)if(C[n].includes(t)){e=n;break}return e}function lt(){return c(ut,null,c("div",{className:m.banner},c("div",{className:m.box},c("div",{className:m.bg},c("strong",null,"Pl Vue"),c("p",null,"一个 JS 库，只关心数据与函数之间的联动")),c(N,{className:m.btn,to:"/docs/reactivity"},"API 参考"))),c("article",{className:R("leayer","module-gap",m.article)},c("p",{className:m.paragraph},"一个轻量级、不依赖任何第三方库的 JS 数据响应式库，除响应式 API 外，该库还提供了组件化、挂载钩子、Router、Store 以及服务端渲染相关 API，项目搭建可参考  ",c("a",{href:g.GITHUB_URL+"mvvm_vue3"},"GitHub"),"。"),c("p",{className:m.mark},"该库本身与 Vue 框架无任何关系，只是多数 API 在命名上相同而已。")),c("ul",{className:R("leayer","module-gap",m.peculiarity)},c("li",null,c("h2",null,"响不响应式的，高度交予开发者决定"),c("p",null,"JSX 编程方式，响应式数据统一使用函数的方式包裹。",c(N,{to:"/docs/property"},"了解更多"))),c("li",null,c("h2",null,"无虚拟 DOM 参与"),c("p",null,"将用到响应式数据的函数进行收集，在数据更新后执行相应的函数。因此直接省去了虚拟 DOM 的比较。")),c("li",null,c("h2",null,"拿来就用，灵活多变"),c("p",null,"无需脚手架，原生应用亦可构建。",c("a",{href:g.GITHUB_URL+"single-page",target:"_blank"},"代码示例"))),c("li",null,c("h2",null,"代码精简，minify < 10k"),c("p",null,"手写 h 与 Fragment，将代码体积精简到极致。"))))}lt.prototype.getInitialProps=async()=>"home";const ie="container-4ac8c9",ae="side-f9a8bf",ue="active-889810",le="content-a47edb",fe="show-side-a60745",b={container:ie,side:ae,active:ue,content:le,"show-side":"show-side-a60745",showSide:fe};class pe{constructor(e){h(this,"config");h(this,"instance");this.config=e,this.instance=gt.create(e),this.instance.interceptors.request.use(n=>this.requestUse(n)),this.instance.interceptors.response.use(n=>this.responseUse(n),n=>{const{response:o,config:s,message:r}=n;if(o&&o.data)return this.responseUse(o);const{url:i}=n.config;return Promise.reject({code:500,msg:r||"network error: "+i})})}requestUse(e){return e}responseUse(e){const n=e.data;return(this[n.code]||this.error)(e)}200(e){return Promise.resolve(e.data)}error(e){const{data:n,config:o}=e;return Promise.reject(n)}}function de(t){return t.then(e=>[null,e]).catch(e=>[e,null])}class he extends pe{constructor(){super({baseURL:g.BASE_API,timeout:5e3})}}const me=new he;function ft(t){return de(me.instance(t))}function ye(){return ft({url:"/file/read",params:{path:"/plvue/config.json"}})}function ge(t){return ft({url:"/file/read",params:{path:t}})}function pt({data:t}){var d;const e=S(t.list),n=S(t.content),o=xt(),s=S(!1),r=S(i());function i(){return o.path.replace(o.monitor,"").slice(1)||e.value[0]&&e.value[0].value}const a=S(null),u=(d=e.value.find(f=>f.value===r.value))==null?void 0:d.label;return c(ut,null,c(Lt,null,c("title",null,u," | Pl Vue"),c("meta",{name:"keywords",content:`${u}`}),c("meta",{name:"description",content:`${u}`})),c("div",{className:R("leayer",b.container)},c("ul",{className:()=>R(b.side,s.value?b.active:"")},e.value.map(f=>c("li",{className:()=>r.value===f.value?b.active:""},c(N,{to:`/docs/${f.value}`},f.label)))),c("div",{ref:a,className:R(b.content,"markdown")},c("div",{innerHTML:()=>n.value}))),c("div",{className:()=>R(b.showSide,s.value?b.active:""),onclick:()=>s.value=!s.value}))}pt.prototype.getInitialProps=async t=>{const e=await be(),n=await we(t.path.replace(t.monitor,"")||e[0]&&e[0].value);return{list:e,content:n}};async function be(){const[t,e]=await ye(),n=[];if(t)return n;const o=JSON.parse(e.data.content);for(const s in o)n.push({label:o[s],value:s});return n}async function we(t){const[e,n]=await ge(`/plvue/${t}.md`);return e?"":n.data.content}const ve="not-found-710606",Se={"not-found":"not-found-710606",notFound:ve};function Re(){return c("div",{className:Se["not-found"]},"404")}$t({base:g.BASE_URL,mode:"history",routes:[{path:"/",component:lt},{path:"/docs",component:pt,exact:!1},{component:Re}]});function _e(){return c(qt,null)}const dt=g.BASE_URL.slice(1),je=Y.readFileSync(F.resolve(__dirname,dt,"index.html"),"utf-8"),Ne=yt.createServer(async(t,e)=>{const n=t.url.replace(g.BASE_URL||"/","/"),o=F.extname(n);if(se().includes(o)){const s=F.resolve(__dirname,dt,n.slice(1));Y.readFile(s,(r,i)=>{if(r)e.writeHead(404,{"Content-Type":"text/plain"}),e.end("Not Found");else{const a=ce(o);a&&e.setHeader("Content-Type",a),e.write(i),e.end()}})}else{const s=await It(_e,n,je);e.write(s),e.end()}}),J=3e3;Ne.listen(J,()=>{console.log(`http://localhost:${J}${g.BASE_URL}`)});
