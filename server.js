"use strict";var it=Object.defineProperty;var at=(t,e,n)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>(at(t,typeof e!="symbol"?e+"":e,n),n);const lt=require("http"),q=require("fs"),x=require("path");function F(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function f(t){return["object","array"].includes(F(t))}function ut(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W(t,e){if(f(t)&&f(e)){const n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(const c of n)if(!o.includes(c)||!W(t[c],e[c]))return!1;return!0}else return t===e}function K(){return typeof window=="object"}function z(t){return F(t)==="object"}function G(t){return Array.isArray(t)}function J(t){return typeof t=="string"}function M(t){Promise.resolve().then(t)}let g=null;const R=new WeakMap;function ft(t){g=t,t(),g=null}function pt(t){const e=R.get(t)||[],n=e.some(o=>g===o);g&&!n&&(e.push(g),R.set(t,e))}function H(t){const e=R.get(t);e&&e.forEach((n,o)=>{n()===!0&&(e.splice(o,1),R.set(t,e))})}const dt=new WeakMap,A=new WeakMap,B={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function L(t){if(!f(t)||Object.isFrozen(t)||dt.get(t))return t;let e=null;return new Proxy(t,{get(n,o,c){if(o===B.RAW)return n;if(f(n[o]))return L(n[o]);const s=Reflect.get(n,o,c);return pt(n),s},set(n,o,c,s){if(n[B.IS_READONLY])return!0;if(f(n[o])){const y=n[o],E=new Set;for(const d in c)E.add(d),this.set(y,d,c[d],s[o]);for(const d in y)E.has(d)||this.deleteProperty(y,d);return!0}if(Reflect.get(n,o,s)===c)return!0;const a=Reflect.set(n,o,c,s),m=A.get(n)||new Set;m.add(o);const ct=m.size;return A.set(n,m),M(()=>{const y=Reflect.get(n,o,s);a&&y===c&&ct===1&&H(n),A.delete(n)}),a},deleteProperty(n,o){const c=Reflect.get(n,o);if(f(c)){for(const a in c)this.deleteProperty(c,a);return!0}const s=ut(n,o),i=Reflect.deleteProperty(n,o);return e=o,M(()=>{s&&i&&c!==void 0&&o===e&&(H(n),e=null)}),i}})}function ht(t){const e=L({value:t});function n(){return e.value}function o(c){e.value=c}return[n,o]}const mt="__v_isRef";var ie;class yt{constructor(e){u(this,ie,!0);u(this,"__v_isShallow",!1);u(this,"_rawValue");u(this,"_value");u(this,"getSignal");u(this,"setSignal");this._rawValue=e;const[n,o]=ht(e);this.getSignal=n,this.setSignal=o,this._value=n()}get value(){return this.getSignal()}set value(e){this.setSignal(e),this._rawValue=e}}ie=mt;function gt(t){return new yt(t)}const b=function(){const t=new WeakMap,e=["null","weakset","weakmap"],n={set(o){const c=new Set;for(const s of o)c.add(b(s));return c},map(o){const c=new Map;for(const[s,i]of o.entries())c.set(s,b(i));return c}};return function(o){const c=F(o);if(typeof o!="object"||e.includes(c))return o;if(t.has(o))return t.get(o);if(n[c])return n[c](o);const s=G(o)?[]:{};Object.setPrototypeOf(s,Object.getPrototypeOf(o)),t.set(o,s);for(const i in o)s[i]=b(o[i]);return s}}();function U(t,e){return Object.assign({},t,e)}function bt(t,e,n={}){let o=!1;if(o)return;const c=t();n.immediate&&e(c,void 0);let s=b(c),i=!0;return ft(()=>{const a=t();if(f(a)){n.deep&&!W(a,s)&&(e(a,s),s=b(a));return}if(i){i=!1;return}a!==s&&(e(a,s),s=a)}),()=>{o=!0}}function wt(t){return["string","number"].includes(typeof t)&&t!==""}function St(t){return!/^on/.test(t)}function Y(t){return typeof t=="function"&&!X(t)}function r(t,e,...n){const o={tag:t,attrs:e||{},children:n};return Y(o.tag)&&o.children.length===0&&o.attrs.children&&(o.children=o.attrs.children),o}function Q({children:t}){return t}const v=Symbol("Fragment");Q.prototype[v]=v;function X(t){return typeof t=="function"&&t.prototype[v]===v}function $(t,e={},n=[""]){if(X(t)){const s=U(e,{children:n}),i=t(s);return j(i)}if(Y(t)){const s=U(e,{children:n}),i=t(s);return $(i.tag,i.attrs,i.children)}let o="";for(const s in e){if(s.startsWith("on")||s==="ref")continue;let i=typeof e[s]=="function"&&St(s)?e[s]():e[s];if(s==="className"){o+=` class=${i}`;continue}if(s==="style"&&z(i)){for(const a in i)typeof i[a]=="function"&&(i[a]=i[a]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}o+=` ${s}=${i}`}const c=j(n);return`<${t}${o}>${c}</${t}>`}function j(t){let e="";return t.forEach(n=>{if(wt(n)){e+=n.toString();return}if(G(n)){e+=j(n);return}if(typeof n=="function"){const o=n();e+=j([o]);return}if(z(n)){e+=$(n.tag,n.attrs,n.children);return}}),e}function _t({tag:t,attrs:e,children:n}){return $(t,e,n)}function T(t){const e=new URL("http://0.0.0.0"+t);return{path:e.pathname,query:Rt(e.search),hash:e.hash}}function C(t){if(J(t))return t;t=t;const e=t.path;let n="";for(const s in t.query)n+=`&${s}=${t.query[s]}`;n=n?"?"+n:"";const o=t.hash?"#"+t.hash:"";return e+n+o}function Rt(t){const e={};return t.replace("?","").split("&").forEach(o=>{const[c,s]=o.split("=");c&&s&&(e[c]=s)}),e}function vt(t){return t.replace(/\/+/g,"/")}const l={base:"",mode:"history",ssrDataKey:"g_initialProps"};let S=null;function jt(t={}){if(Object.assign(l,t),K()){const e=T(Z());S=L(e)}else S??(S=T("/"))}function P(t){const e=T(t);for(const n in e)S[n]=e[n]}function Z(){return l.mode==="history"?location.href.replace(location.origin+l.base,""):location.hash.slice(1)}function Nt(){return S}function Pt(t){const e=C(t);l.mode==="history"?history.pushState({},"",l.base+e):location.hash=e,P(e)}function At(t){const e=C(t);l.mode==="history"?history.replaceState({},"",l.base+e):location.hash=e,P(e)}function Ot(t){history.go(t)}function xt(){return{push:Pt,replace:At,go:Ot}}function tt(t){t.exact??(t.exact=!0);const e=t.component;return r(e,null)}const N=Symbol("Route");tt.prototype[N]=N;function Ut(t){return typeof t=="function"&&t.prototype[N]===N}function et(t,e){const n=t.find(o=>o.attrs.exact||o.attrs.exact===void 0?e===o.attrs.path:(e+"/").startsWith(o.attrs.path+"/"));if(n)return n.attrs.component;{const o=t[t.length-1];if(o&&Ut(o.tag)&&!o.attrs.path)return o.attrs.component}}function Tt(t){window.addEventListener("popstate",()=>{P(Z())});const e=gt(null);let n;return bt(()=>S.path,async o=>{const c=et(t.children,o);if(!c)return;const{getInitialProps:s}=c.prototype;typeof s=="function"&&(window[l.ssrDataKey]?(n=window[l.ssrDataKey],delete window[l.ssrDataKey]):n=await s()),e.value=c},{immediate:!0}),r(Q,null,()=>e.value&&r(e.value,{data:n}))}function kt(t){let e="";if(l.mode==="history")e=t.url.replace(l.base,"");else{const o=t.url.match(/#.*/);e=o?o[0]:""}P(e);const n=et(t.children,e);return r(n,null)}function It(t){return K()?r(Tt,{...t}):r(kt,{...t})}const Ft={to:"/",type:"push"};function w(t){t=U(Ft,t);const e=J(t.to)?t.to:C(t.to),n=l.base+(l.mode==="hash"?"#"+e:e),o=xt();function c(s){s.preventDefault(),t.type==="push"?o.push(e):o.replace(e)}return r("a",{href:n,onclick:c},t.children)}const p={BASE_URL:"",NODE_ENV:"production",BASE_API:"/api",GITHUB_URL:"https://github.com/yubo9807/"},Lt="banner-64e93c",$t="box-e24f47",Ct="article-e5ab12",Et="paragraph-6f9bd7",Mt="mark-66b760",Ht="peculiarity-fd110f",h={banner:Lt,box:$t,article:Ct,paragraph:Et,mark:Mt,peculiarity:Ht},Bt="main-67f0a8",Vt={main:Bt},Dt="header-ada874",qt="navigation-0bbde6",V={header:Dt,navigation:qt};function Wt(){return r("header",{className:V.header},r("div",null,r(w,{to:"/"},r("h1",null,"Pl Vue"))),r("nav",{className:V.navigation},r(w,{to:"/docs"},"文档"),r("a",{href:p.GITHUB_URL+"mvvm_vue3",target:"_blank"},"GitHub")))}const Kt="footer-967a98",zt={footer:Kt};function Gt(){return r("footer",{className:zt.footer},r("strong",null,"⚠️ 注意事项"),r("p",null,"本文文档仅供学习参考。并未发布正式版本，不提供任何商业用途。"))}function nt(t){return r("div",null,r(Wt,null),r("main",{className:Vt.main},t.children),r(Gt,null))}function k(...t){return t.join(" ").trim().replace(/\s+/," ")}const I={"text/html":[".html"],"text/css":[".css"],"application/javascript;":[".js"],"application/json":[".json"],"image/vnd.microsoft.icon":[".ico"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"font/woff2":[".worf2"],"font/woff":[".worf"],"font/ttf":[".ttf"],"application/octet-stream":[".mp4",".avi"]};function Jt(){const t=Object.values(I).flat();return[".gz"].concat(t)}function Yt(t){t=t.toLowerCase();let e=null;for(const n in I)if(I[n].includes(t)){e=n;break}return e}function ot(){return r(nt,null,r("div",{className:h.banner},r("div",{className:h.box},r("strong",null,"Pl Vue"),r("p",null,"一个 JS 库，只关心数据与函数之间的联动"))),r("article",{className:k("leayer","module-gap",h.article)},r("p",{className:h.paragraph},"Plagiarize Vue 是一个轻量级、不依赖任何第三方库的 JS 数据响应式库，除响应式 API 外，该库还提供了组件化、挂载钩子、Router、Store 以及服务端渲染相关 API，项目搭建可参考  ",r("a",{href:p.GITHUB_URL+"mvvm_vue3"},"GitHub"),"。"),r("p",{className:h.mark},"该库本身与 Vue 框架无任何关系，只是多数 API 在命名上相同而已。")),r("ul",{className:k("leayer","module-gap",h.peculiarity)},r("li",null,r("h2",null,"响不响应式的，高度交予开发者决定"),r("p",null,"JSX 编程方式，响应式数据统一使用函数的方式包裹。",r("a",{href:p.GITHUB_URL+"mvvm_vue3",target:"_blank"},"了解更多"))),r("li",null,r("h2",null,"无虚拟 DOM 参与"),r("p",null,"将用到响应式数据的函数进行收集，在数据更新后执行相应的函数。因此直接省去了虚拟 DOM 的比较。")),r("li",null,r("h2",null,"拿来就用，灵活多变"),r("p",null,"无需脚手架，原生应用亦可构建。",r("a",{href:p.GITHUB_URL+"single-page",target:"_blank"},"代码示例"))),r("li",null,r("h2",null,"代码精简，打包代码仅有 10k"),r("p",null,"手写 h 与 Fragment，将代码体积精简到极致。"))))}ot.prototype.getInitialProps=async()=>"home";const Qt="container-4ac8c9",Xt="side-f9a8bf",Zt="content-a47edb",O={container:Qt,side:Xt,content:Zt};function te(t){const e=Nt();return console.log(e),r(nt,null,r("div",{className:k("leayer",O.container)},r("ul",{className:O.side},r("li",null,r(w,{to:"/docs/intro"},"简介")),r("li",null,r(w,{to:"/docs/use"},"使用")),r("li",null,r(w,{to:"/docs/realize"},"实现"))),r("div",{className:O.content})))}const ee="not-found-710606",ne={"not-found":"not-found-710606",notFound:ee};function oe(){return r("div",{className:ne["not-found"]},"404")}jt({base:p.BASE_URL,mode:"history"});const rt=[{path:"/",component:ot},{path:"/docs",component:te,exact:!1},{component:oe}];function re(t){return r(It,{url:t.url,data:t.data},...rt.map(e=>r(tt,{...e})))}const st=p.BASE_URL.slice(1),_=q.readFileSync(x.resolve(__dirname,st,"index.html"),"utf-8");async function se(t){const e=rt.find(n=>n.exact||n.exact===void 0?t===n.path:(t+"/").startsWith(vt(n.path+"/")));if(e&&typeof e.component.prototype.getInitialProps=="function")return await e.component.prototype.getInitialProps()}const ce=lt.createServer(async(t,e)=>{const n=t.url.replace("/","/"),o=x.extname(n);if(Jt().includes(o)){const c=x.resolve(__dirname,st,n.slice(1));q.readFile(c,(s,i)=>{if(s)e.writeHead(404,{"Content-Type":"text/plain"}),e.end("Not Found");else{const a=Yt(o);a&&e.setHeader("Content-Type",a),e.write(i),e.end()}})}else{const c=await se(n),s=_t(r(re,{url:n,data:c})),i=_.search("</body>"),a=c===void 0?"":`<script>window.g_initialProps=${JSON.stringify(c)}<\/script>`,m=_.slice(0,i)+a+_.slice(i,_.length);e.write(m.replace("<!--ssr-outlet-->",s)),e.end()}}),D=3e3;ce.listen(D,()=>{console.log(`http://localhost:${D}${p.BASE_URL}`)});
