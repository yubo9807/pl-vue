var Dt=Object.defineProperty;var Bt=(t,e,n)=>e in t?Dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var c=(t,e,n)=>(Bt(t,typeof e!="symbol"?e+"":e,n),n),ht=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var pt=(t,e,n)=>(ht(t,e,"read from private field"),n?n.call(t):e.get(t)),dt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},j=(t,e,n,r)=>(ht(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function tt(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function _(t){return["object","array"].includes(tt(t))}function Ut(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function et(t,e){if(_(t)&&_(e)){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const o of n)if(!r.includes(o)||!et(t[o],e[o]))return!1;return!0}else return t===e}function h(t){return tt(t)==="object"}function L(t){return Array.isArray(t)}function v(t){return typeof t=="string"}function y(t){Promise.resolve().then(t)}function qt(){return Number(Math.random().toString().slice(2)).toString(32)}function C(...t){console.warn(...t)}let $=null;const D=new WeakMap;function N(t){$=t,t(),$=null}function Yt(t){const e=D.get(t)||[],n=e.some(r=>$===r);$&&!n&&(e.push($),D.set(t,e))}function gt(t){const e=D.get(t);e&&e.forEach((n,r)=>{const o=n();typeof o=="boolean"&&o&&(e.splice(r,1),D.set(t,e))})}function kt(t){return Reflect.defineProperty(t,b.IS_READONLY,{value:!0}),new Proxy(t,{get(e,n){return n===b.RAW?e:Reflect.get(e,n)},set(e,n,r){const o=Reflect.get(e,n);return printWran(`Set operation on key '${n.toString()}' failed: target is readonly.`,{[n.toString()]:o}),o},deleteProperty(e,n){const r=Reflect.get(e,n);return printWran(`Delete operation on key '${n.toString()}' failed: target is readonly.`,{[n.toString()]:r}),r}})}function Kt(t){return t&&kt(t)[b.IS_READONLY]}const Ct=new WeakMap,b={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function E(t){if(!_(t)||Object.isFrozen(t))return C(`lue cannot be made reactive: ${t}`),t;if(Ct.get(t))return t;let e=null;return new Proxy(t,{get(n,r,o){if(r===b.RAW)return n;Yt(n);const s=Reflect.get(n,r,o);return _(s)?E(s):s},set(n,r,o,s){const i=Reflect.get(n,r,s),u=Reflect.set(n,r,o,s);return n[b.IS_READONLY]?i:(y(()=>{const f=Reflect.get(n,r,s);u&&i!==o&&f===o&&gt(n)}),u)},deleteProperty(n,r){Reflect.get(n,r),Ut(n,r);const o=Reflect.deleteProperty(n,r);return e=r,y(()=>{r===e&&(gt(n),e=null)}),o}})}function nt(t){return!!t[b.RAW]}function vt(t){return nt(t)?t[b.RAW]:t}function zt(t){return nt(t)||Kt(t)}function Ht(t){return _(t)&&Ct.set(t,!0),t}function Ot(t){const e=E({value:t});function n(){return e.value}function r(o){e.value=o}return[n,r]}const rt="__v_isRef";var ke;class jt{constructor(e){c(this,ke,!0);c(this,"__v_isShallow",!1);c(this,"_rawValue");c(this,"_value");c(this,"getSignal");c(this,"setSignal");this._rawValue=e;const[n,r]=Ot(e);this.getSignal=n,this.setSignal=r,this._value=n()}get value(){return this.getSignal()}set value(e){this.setSignal(e),this._rawValue=e}}ke=rt;function J(t){return new jt(t)}function Mt(t){return t&&!!t[rt]}function Jt(t){return Mt(t)?t.value:t}class Nt{constructor(e,n,r=void 0){c(this,"__v_isRef",!0);c(this,"_defaultValue");c(this,"_key");c(this,"_object");this._defaultValue=r,this._key=n,this._object=e}get value(){return this._object[this._key]}set value(e){this._object[this._key]=e}}function Qt(t,e,n=void 0){return new Nt(t,e,n)}function Gt(t){const e={};for(const n in t)e[n]=new Nt(t,n);return e}class Xt extends jt{constructor(n){let r=!1;const{get:o,set:s}=n(()=>r=!0,()=>this.setValue());super(o());c(this,"_get");c(this,"_set");this.__v_isRef=r,this._get=o,this._set=s}get value(){return this.__v_isRef?super.value:this._get()}set value(n){this._set(n)}setValue(){super.value=this._get()}}function Zt(t){return new Xt(t)}class te{constructor(e){c(this,"fn");this.fn=e}}var Ce;class yt{constructor(e,n){c(this,"__v_isReadonly",!0);c(this,Ce,!0);c(this,"_cacheable",!0);c(this,"_dirty",!0);c(this,"computed");c(this,"_setter");this.computed=new te(e),this._setter=n}get value(){return this.computed.fn()}set value(e){this._setter?this._setter(e):C("Write operation failed: computed value is readonly")}}Ce=rt;function ee(t){return typeof t=="function"?new yt(t):new yt(t.get,t.set)}const w=function(){const t=new WeakMap,e=["null","weakset","weakmap"],n={set(r){const o=new Set;for(const s of r)o.add(w(s));return o},map(r){const o=new Map;for(const[s,i]of r.entries())o.set(s,w(i));return o}};return function(r){const o=tt(r);if(typeof r!="object"||e.includes(o))return r;if(t.has(r))return t.get(r);if(n[o])return n[o](r);const s=L(r)?[]:{};Object.setPrototypeOf(s,Object.getPrototypeOf(r)),t.set(r,s);for(const i in r)s[i]=w(r[i]);return s}}();function T(t,e){return Object.assign({},t,e)}function z(t,e,n={}){let r=!1;if(r)return;const o=t();let s=w(o);return n.immediate&&e(o,void 0),N(()=>{const i=[];if(r)return i.length>0&&i.forEach(f=>f()),!0;const u=t();_(o)?n.deep&&!et(u,s)&&(e(u,E(s)),s=w(u),At(u).forEach(f=>{const p=z(()=>f,()=>{e(u,E(s))},{deep:!0});i.push(p)})):u!==s&&(e(u,s),s=w(u))}),()=>{r=!0}}function At(t,e=[]){for(const n in t)_(t[n])&&(e.push(t[n]),At(t[n],e));return e}function ne(t){let e=!1,n=!1;return N(()=>{if(e)return!0;t(r=>{n&&r(),n=!0})}),()=>{e=!0}}function P(t){return["string","number"].includes(typeof t)&&t!==""}function Pt(t){return!/^on/.test(t)}function ot(t){return h(t)&&(v(t.tag)||x(t.tag))}function l(t){return typeof t=="function"&&!x(t)}function st(t){return[void 0,null,"",!0,!1].includes(t)}function V(t){return document.createTextNode(t)}function a(t,e,...n){const r={tag:t,attrs:e||{},children:n};return l(r.tag)&&r.children.length===0&&r.attrs.children&&(r.children=r.attrs.children),r}function I({children:t}){return t}const B=Symbol("Fragment");I.prototype[B]=B;function x(t){return typeof t=="function"&&t.prototype[B]===B}let W=!1;function mt(t){W=t}const Q=[];let xt=!1;function $t(t){if(!W){if(xt){y(t);return}Q.push(t)}}function _t(){Q.forEach(t=>{t()}),Q.length=0,xt=!0}const Tt=new WeakMap;function Lt(t,e=[]){return t.forEach(n=>{h(n)&&(l(n.tag)?e.push({comp:n.tag,compId:n.tag.prototype._id,props:T(n.attrs,{children:t})}):P(n.tag)&&Lt(n.children,e))}),e}function it(t,e=[]){const n=Tt.get(t)||[];return e.push(...n),n.forEach(r=>{const o=it(r.comp);e.push(...o)}),e}const G=new Map;function re(t,e){if(W)return;const n=t.prototype._id,r=G.get(n)||[];r.some(s=>s===e)||(r.push(e),G.set(n,r))}function Rt(t){const e=it(t).map(r=>r.compId);e.unshift(t.prototype._id);const n=[];e.forEach(r=>{const o=G.get(r)||[];n.push(...o)}),n.forEach(r=>{r()})}const X=[];let Vt=!1;function oe(t){if(!W){if(Vt){t();return}X.push(t)}}function se(){X.forEach(t=>{t()}),X.length=0,Vt=!0}const Z=new Map;function ie(t,e){if(W)return;const n=t.prototype._id,r=Z.get(n)||[];r.some(s=>s===e)||(r.push(e),Z.set(n,r))}function St(t){const e=it(t).map(r=>r.compId);e.unshift(t.prototype._id);const n=[];e.forEach(r=>{const o=Z.get(r)||[];n.push(...o)}),n.forEach(r=>{r()})}function k(t,e,n){if(v(t))return ut(t,e,n);if(x(t))return U(n);if(l(t)){const r=T(e,{children:n});t.prototype._id=qt();const o=t(r);return P(o)?V(o):(Tt.set(t,Lt(o.children)),k(o.tag,o.attrs,o.children))}}function ut(t,e={},n=[""]){if(x(t))return k(t,e,n);const r=document.createElement(t);n.forEach(o=>{if(!st(o)){if(P(o)){const s=V(o);s.nodeValue=o,r.appendChild(s);return}if(typeof o=="function"){const s=U([o]);r.appendChild(s);return}if(L(o)){const s=U(o);r.appendChild(s);return}if(ot(o)){const s=ut(o.tag,o.attrs,o.children);r.appendChild(s);return}if(h(o)&&l(o.tag)){const s=k(o.tag,o.attrs,o.children);r.appendChild(s);return}C(`render: 不支持 ${o} 值渲染`)}});for(const o in e){const s=e[o];r[o]=s,o==="ref"&&(s.value=r),typeof s=="function"&&Pt(o)&&N(()=>{r[o]=s()})}if(e.style&&h(e.style))for(const o in e.style){const s=e.style[o];typeof s=="function"?N(()=>r.style[o]=s()):r.style[o]=s}return r}function U(t){const e=document.createDocumentFragment();return t.forEach(n=>{if(!st(n)){if(P(n)){const r=V(n);r.nodeValue=n,e.appendChild(r);return}if(typeof n=="function"){ue(e,n);return}if(L(n)){const r=U(n);e.appendChild(r);return}if(ot(n)){const r=ut(n.tag,n.attrs,n.children);e.appendChild(r);return}if(h(n)&&l(n.tag)){const r=k(n.tag,n.attrs,n.children);e.appendChild(r);return}C(`render: 不支持 ${n} 值渲染`)}}),e}function wt(t){if(P(t))return V(t);if(ot(t)||h(t)&&l(t.tag))return k(t.tag,t.attrs,t.children)}function ue(t,e){let n=[],r=!0,o=null;const s=V("");t.appendChild(s),N(()=>{let i=e();if(i&&h(i)&&x(i.tag)){C("不支持响应式节点片段渲染");return}L(i)||(i=[i]),i=i.filter(f=>!st(f));let u=0;for(;u<i.length;){let f=i[u];const p=u,R=n.findIndex(d=>d.key===p);if(R>=0){if(et(f,n[R].tree)){u++;continue}const d=wt(f),S=n[R].tree;l(S.tag)&&St(S.tag),n[R].node.parentElement.replaceChild(d,n[R].node),l(S.tag)&&Rt(S.tag),n[R].tree=f,n[R].node=d}else{const d=wt(f);if(r)t.appendChild(d);else if(n.length===0)o??(o=s.parentElement),o.insertBefore(d,s.nextSibling);else{const S=n[n.length-1].node,Ft=S.nextSibling;S.parentElement.insertBefore(d,Ft)}n.push({key:p,tree:f,node:d})}u++}if(n.length>i.length){for(let f=i.length;f<n.length;f++){const p=n[f].tree;l(p.tag)&&St(p.tag),n[f].node.remove(),l(p.tag)&&Rt(p.tag)}n.splice(i.length,n.length-i.length)}r=!1})}function ct(t,e={},n=[""]){if(x(t)){const s=T(e,{children:n}),i=t(s);return q(i)}if(l(t)){const s=T(e,{children:n}),i=t(s);return ct(i.tag,i.attrs,i.children)}let r="";for(const s in e){if(s.startsWith("on")||s==="ref")continue;let i=typeof e[s]=="function"&&Pt(s)?e[s]():e[s];if(s==="className"){r+=` class=${i}`;continue}if(s==="style"&&h(i)){for(const u in i)typeof i[u]=="function"&&(i[u]=i[u]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}r+=` ${s}=${i}`}const o=q(n);return`<${t}${r}>${o}</${t}>`}function q(t){let e="";return t.forEach(n=>{if(P(n)){e+=n.toString();return}if(L(n)){e+=q(n);return}if(typeof n=="function"){const r=n();e+=q([r]);return}if(h(n)){e+=ct(n.tag,n.attrs,n.children);return}C(`renderToString: 不支持 ${n} 值渲染`)}),e}function ce({tag:t,attrs:e,children:n}){const r=k(t,e,n);if(se(),r instanceof DocumentFragment){const o=r.children[0];y(()=>{o.parentNode&&_t()})}else r instanceof HTMLElement&&y(()=>{r.parentNode&&_t()});return r}function fe({tag:t,attrs:e,children:n}){mt(!0);const r=ct(t,e,n);return mt(!1),r}const je=Object.freeze(Object.defineProperty({__proto__:null,Fragment:I,binding:N,computed:ee,createSignal:Ot,customRef:Zt,h:a,isProxy:zt,isReactive:nt,isRef:Mt,markRaw:Ht,nextTick:y,onBeforeMount:oe,onBeforeUnmount:ie,onMounted:$t,onUnmounted:re,reactive:E,readonly:kt,ref:J,render:ce,renderToString:fe,toRaw:vt,toRef:Qt,toRefs:Gt,unref:Jt,watch:z,watchEffect:ne},Symbol.toStringTag,{value:"Module"}));let m="",O,ft=!0,F="";function le(t){m=t.base||"/",/(^\/$|^\/.+\/$)/.test(m)||C("base 必须以 / 开头 / 结尾"),O=t.mode||"history",ft=t.isBrowser??!0,F=t.SSR_DATA_KEY||"g_initialProps"}function lt(t){if(v(t))return t;t=t;const e=t.path;let n="";for(const s in t.query)n+=`&${s}=${t.query[s]}`;n=n?"?"+n:"";const r=t.hash?"#"+t.hash:"";return e+n+r}function ae(t){const e={};return t.replace("?","").split("&").forEach(r=>{const[o,s]=r.split("=");o&&s&&(e[o]=s)}),e}function H(t){return t.replace(/\/+/g,"/")}const M=E({path:"",query:{},hash:"",meta:{}});function A(t){const e=new URL(H("http://0.0.0.0/"+t));M.path=e.pathname.replace(m,"/"),M.query=ae(e.search),M.hash=e.hash}function he(){if(!M.path&&ft){let t="";O==="history"?t=location.href.replace(location.origin+m,""):t=location.hash.slice(1),A(t)}return M}function pe(t){const e=lt(t);O==="history"?history.pushState({},"",H(m+"/"+e)):location.hash=e,A(e)}function de(t){const e=lt(t);O==="history"?history.replaceState({},"",H(m+"/"+e)):location.hash=e,A(e)}function ge(t){history.go(t)}function at(){return{push:pe,replace:de,go:ge}}function It(t){const e=t.component;return a(e,null)}const Y=Symbol("Route");It.prototype[Y]=Y;function bt(t){return typeof t=="function"&&t.prototype[Y]===Y}function ye(t){const e=at();return $t(()=>{e.replace(t.to)}),a("div",null)}let Et=!0;function Wt(t,e=!0){const n=J(null),r=J(void 0);return z(()=>M.path,async o=>{const s=t.children.filter(u=>h(u)&&bt(u.tag)),i=s.find(u=>u.attrs.exact?o===u.attrs.path:(o+"/").startsWith(u.attrs.path+"/"));if(i)if(e){const u=i.attrs.component;typeof u.prototype.getInitialProps=="function"?Et&&window[F]?(r.value=window[F],delete window[F],Et=!1):(t.Loading&&(n.value=t.Loading),r.value=await u.prototype.getInitialProps()):r.value=void 0,n.value=u}else n.value=i.attrs.component;else{const u=s[s.length-1];h(u)&&bt(u.tag)&&!u.attrs.path?n.value=u.attrs.component:n.value=null}},{immediate:!0}),{CurrentComp:n,data:r}}function me(t){function e(){return O==="history"?location.href.replace(location.origin+m,""):location.hash.slice(1)}A(e()),window.addEventListener("popstate",()=>{A(e())});const{CurrentComp:n,data:r}=Wt(t);return a(I,null,()=>n.value?a(n.value,{data:r.value}):null)}function _e(t){let e="";if(O==="history")e=t.url.replace(m,"");else{const r=t.url.match(/#.*/);e=r?r[0]:""}A(e);const{CurrentComp:n}=Wt({children:t.children,url:e},!1);return a(I,null,()=>a(n.value,{data:t.data}))}function Re(t){return a(I,null,ft?a(me,{...t}):a(_e,{...t}))}const Se={to:"/",type:"push"};function we(t){t=T(Se,t);const e=v(t.to)?t.to:lt(t.to),n=H(m+(O==="hash"?"#"+e:e)),r=at();function o(s){s.preventDefault(),t.type==="push"?r.push(e):r.replace(e)}return a("a",{href:n,onclick:o},t.children)}const Me=Object.freeze(Object.defineProperty({__proto__:null,Link:we,Redirect:ye,Route:It,Router:Re,initRouter:le,useRoute:he,useRouter:at},Symbol.toStringTag,{value:"Module"})),K=Symbol("action");function be(t){return typeof t=="function"&&t.prototype[K]===K}var g;class Ee{constructor(e,n){c(this,"state");c(this,"actions");dt(this,g,!0);this.state=E(w(e)),z(()=>this.state,()=>{pt(this,g)&&this._merge(e)},{deep:!0}),this.actions={};for(const r in n){let o=function(...i){j(s,g,!1);const u=n[r](...i);s._merge(e),_(u)&&u[Symbol.toStringTag]==="Promise"?u.then(()=>{s._merge(e),y(()=>j(s,g,!0))}):(s._merge(e),y(()=>j(s,g,!0)))};const s=this;o.prototype[K]=K,this.actions[r]=o}}_merge(e){const n=Object.keys(e);for(const r in e)this.state[r]=e[r];for(const r in this.state)be(this.state[r])||!n.includes(r)&&delete this.state[r]}get store(){j(this,g,!1);const e=Object.assign(this.state,this.actions);return y(()=>j(this,g,!0)),e}}g=new WeakMap;function Ne(t,e){return()=>new Ee(t,e).store}export{I as F,we as L,Re as R,ee as a,Me as b,Ne as c,It as d,ce as e,a as h,le as i,re as o,J as r,je as v};
