var Le=Object.defineProperty;var Ve=(e,n,t)=>n in e?Le(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var u=(e,n,t)=>(Ve(e,typeof n!="symbol"?n+"":n,t),t),ie=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var ce=(e,n,t)=>(ie(e,n,"read from private field"),t?t.call(e):n.get(e)),ue=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},j=(e,n,t,r)=>(ie(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t);function a(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function T(e){return["object","array"].includes(a(e))}function $e(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function J(e,n){if(["object","array"].includes(a(e))&&["object","array"].includes(a(n))){const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const o of t)if(!r.includes(o)||!J(e[o],n[o]))return!1;return!0}else return e===n}function y(e){Promise.resolve().then(e)}let M=null;const $=new WeakMap;function C(e){M=e,e(),M=null}function Ie(e){const n=$.get(e)||[],t=n.some(r=>M===r);M&&!t&&(n.push(M),$.set(e,n))}function fe(e){const n=$.get(e);n&&n.forEach((t,r)=>{const o=t();typeof o=="boolean"&&o&&(n.splice(r,1),$.set(e,n))})}function _e(e){return Reflect.defineProperty(e,b.IS_READONLY,{value:!0}),new Proxy(e,{get(n,t){return t===b.RAW?n:Reflect.get(n,t)},set(n,t,r){const o=Reflect.get(n,t);return console.warn(`Set operation on key '${t.toString()}' failed: target is readonly.`,{[t.toString()]:o}),o},deleteProperty(n,t){const r=Reflect.get(n,t);return console.warn(`Delete operation on key '${t.toString()}' failed: target is readonly.`,{[t.toString()]:r}),r}})}function Fe(e){return e&&_e(e)[b.IS_READONLY]}const Re=new WeakMap,b={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function w(e){if(!T(e))return console.warn(`lue cannot be made reactive: ${e}`),e;if(Re.get(e))return e;let n=null;return new Proxy(e,{get(t,r,o){if(r===b.RAW)return t;Ie(t);const s=Reflect.get(t,r,o);return T(s)?w(s):s},set(t,r,o,s){const i=Reflect.get(t,r,s),c=Reflect.set(t,r,o,s);return t[b.IS_READONLY]?i:(y(()=>{const f=Reflect.get(t,r,s);c&&i!==o&&f===o&&fe(t)}),c)},deleteProperty(t,r){Reflect.get(t,r),$e(t,r);const o=Reflect.deleteProperty(t,r);return n=r,y(()=>{r===n&&(fe(t),n=null)}),o}})}function Q(e){return!!e[b.RAW]}function We(e){return Q(e)?e[b.RAW]:e}function De(e){return Q(e)||Fe(e)}function Be(e){return T(e)&&Re.set(e,!0),e}function be(e){const n=w({value:e});function t(){return n.value}function r(o){n.value=o}return[t,r]}const G="__v_isRef";var bt;class we{constructor(n){u(this,bt,!0);u(this,"__v_isShallow",!1);u(this,"_rawValue");u(this,"_value");u(this,"getSignal");u(this,"setSignal");this._rawValue=n;const[t,r]=be(n);this.getSignal=t,this.setSignal=r,this._value=t()}get value(){return this.getSignal()}set value(n){this.setSignal(n),this._rawValue=n}}bt=G;function Y(e){return new we(e)}function Se(e){return e&&!!e[G]}function Ue(e){return Se(e)?e.value:e}class Ee{constructor(n,t,r=void 0){u(this,"__v_isRef",!0);u(this,"_defaultValue");u(this,"_key");u(this,"_object");this._defaultValue=r,this._key=t,this._object=n}get value(){return this._object[this._key]}set value(n){this._object[this._key]=n}}function qe(e,n,t=void 0){return new Ee(e,n,t)}function Ye(e){const n={};for(const t in e)n[t]=new Ee(e,t);return n}class Ke extends we{constructor(t){let r=!1;const{get:o,set:s}=t(()=>r=!0,()=>this.setValue());super(o());u(this,"_get");u(this,"_set");this.__v_isRef=r,this._get=o,this._set=s}get value(){return this.__v_isRef?super.value:this._get()}set value(t){this._set(t)}setValue(){super.value=this._get()}}function He(e){return new Ke(e)}class ze{constructor(n){u(this,"fn");this.fn=n}}var wt;class ae{constructor(n,t){u(this,"__v_isReadonly",!0);u(this,wt,!0);u(this,"_cacheable",!0);u(this,"_dirty",!0);u(this,"computed");u(this,"_setter");this.computed=new ze(n),this._setter=t}get value(){return this.computed.fn()}set value(n){this._setter?this._setter(n):console.warn("Write operation failed: computed value is readonly")}}wt=G;function ve(e){return typeof e=="function"?new ae(e):new ae(e.get,e.set)}function O(e){return e instanceof Array?Qe(e):a(e)==="object"?Je(e):e}function Je(e){let n={},t=Object.getOwnPropertyNames(e);for(let r=0;r<t.length;r++)n[t[r]]=O(e[t[r]]);return n}function Qe(e){let n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=O(e[t]);return n}function U(e,n,t={}){let r=!1;if(r)return;const o=e();let s=O(o);return t.immediate&&n(o,void 0),C(()=>{const i=[];if(r)return i.length>0&&i.forEach(f=>f()),!0;const c=e();T(o)?t.deep&&!J(c,s)&&(n(c,w(s)),s=O(c),je(c).forEach(f=>{const d=U(()=>f,()=>{n(c,w(s))},{deep:!0});i.push(d)})):c!==s&&(n(c,s),s=O(c))}),()=>{r=!0}}function je(e,n=[]){for(const t in e)T(e[t])&&(n.push(e[t]),je(e[t],n));return n}function Ge(e){let n=!1,t=!1;return C(()=>{if(n)return!0;e(r=>{t&&r(),t=!0})}),()=>{n=!0}}function A(e){return["string","number"].includes(typeof e)&&e!==""}function Oe(e){return!/^on/.test(e)}function X(e){return a(e)==="object"&&(typeof e.tag=="string"||x(e.tag))}function l(e){return typeof e=="function"&&!x(e)}function Z(e){return[void 0,null,"",!0,!1].includes(e)}function h(e,n,...t){const r={tag:e,attrs:n||{},children:t};return l(r.tag)&&r.children.length===0&&r.attrs.children&&(r.children=r.attrs.children),r}function P({children:e}){return e}const I=Symbol("Fragment");P.prototype[I]=I;function x(e){return typeof e=="function"&&e.prototype[I]===I}let L=!1;function le(e){L=e}const K=[];let ke=!1;function Ce(e){if(!L){if(ke){y(e);return}K.push(e)}}function he(){K.forEach(e=>{e()}),K.length=0,ke=!0}const Ne=new WeakMap;function Ae(e,n=[]){return e.forEach(t=>{a(t)==="object"&&(l(t.tag)?n.push({comp:t.tag,compId:t.tag.prototype._id,props:Object.assign({},t.attrs,{children:e})}):A(t.tag)&&Ae(t.children,n))}),n}function ee(e,n=[]){const t=Ne.get(e)||[];return n.push(...t),t.forEach(r=>{const o=ee(r.comp);n.push(...o)}),n}const H=new Map;function Xe(e,n){if(L)return;const t=e.prototype._id,r=H.get(t)||[];r.some(s=>s===n)||(r.push(n),H.set(t,r))}function de(e){const n=ee(e).map(r=>r.compId);n.unshift(e.prototype._id);const t=[];n.forEach(r=>{const o=H.get(r)||[];t.push(...o)}),t.forEach(r=>{r()})}const z=[];let xe=!1;function Ze(e){if(!L){if(xe){e();return}z.push(e)}}function et(){z.forEach(e=>{e()}),z.length=0,xe=!0}const v=new Map;function tt(e,n){if(L)return;const t=e.prototype._id,r=v.get(t)||[];r.some(s=>s===n)||(r.push(n),v.set(t,r))}function pe(e){const n=ee(e).map(r=>r.compId);n.unshift(e.prototype._id);const t=[];n.forEach(r=>{const o=v.get(r)||[];t.push(...o)}),t.forEach(r=>{r()})}function nt(){return Number(Math.random().toString().slice(2)).toString(32)}function S(e,n,t){if(typeof e=="string")return te(e,n,t);if(x(e))return F(t);if(l(e)){const r=Object.assign({},n,{children:t});e.prototype._id=nt();const o=e(r);return A(o)?document.createTextNode(o.toString()):(Ne.set(e,Ae(o.children)),S(o.tag,o.attrs,o.children))}}function te(e,n={},t=[""]){if(x(e))return S(e,n,t);const r=document.createElement(e);t.forEach(o=>{if(!Z(o)){if(A(o)){const s=document.createTextNode(o);s.nodeValue=o,r.appendChild(s);return}if(typeof o=="function"){const s=F([o]);r.appendChild(s);return}if(o instanceof Array){const s=F(o);r.appendChild(s);return}if(X(o)){const s=te(o.tag,o.attrs,o.children);r.appendChild(s);return}if(a(o)==="object"&&l(o.tag)){const s=S(o.tag,o.attrs,o.children);r.appendChild(s);return}console.warn(`render: 不支持 ${o} 值渲染`)}});for(const o in n){const s=n[o];r[o]=s,o==="ref"&&(s.value=r),typeof s=="function"&&Oe(o)&&C(()=>{r[o]=s()})}if(n.style&&n.style instanceof Object)for(const o in n.style){const s=n.style[o];typeof s=="function"?C(()=>r.style[o]=s()):r.style[o]=s}return r}function F(e){const n=document.createDocumentFragment();return e.forEach(t=>{if(!Z(t)){if(A(t)){const r=document.createTextNode(t);r.nodeValue=t,n.appendChild(r);return}if(typeof t=="function"){rt(n,t);return}if(t instanceof Array){const r=F(t);n.appendChild(r);return}if(X(t)){const r=te(t.tag,t.attrs,t.children);n.appendChild(r);return}if(a(t)==="object"&&l(t.tag)){const r=S(t.tag,t.attrs,t.children);n.appendChild(r);return}console.warn(`render: 不支持 ${t} 值渲染`)}}),n}function ge(e){if(A(e))return document.createTextNode(e.toString());if(X(e)||a(e)==="object"&&l(e.tag))return S(e.tag,e.attrs,e.children)}function rt(e,n){let t=[],r=!0,o=null;const s=document.createTextNode("");e.appendChild(s),C(()=>{let i=n();if(i&&a(i)==="object"&&x(i.tag)){console.warn("不支持响应式节点片段渲染");return}i instanceof Array||(i=[i]),i=i.filter(f=>!Z(f));let c=0;for(;c<i.length;){let f=i[c];const d=c,_=t.findIndex(p=>p.key===d);if(_>=0){if(J(f,t[_].tree)){c++;continue}const p=ge(f),R=t[_].tree;l(R.tag)&&pe(R.tag),t[_].node.parentElement.replaceChild(p,t[_].node),l(R.tag)&&de(R.tag),t[_].tree=f,t[_].node=p}else{const p=ge(f);if(r)e.appendChild(p);else if(t.length===0)o??(o=s.parentElement),o.insertBefore(p,s.nextSibling);else{const R=t[t.length-1].node,Pe=R.nextSibling;R.parentElement.insertBefore(p,Pe)}t.push({key:d,tree:f,node:p})}c++}if(t.length>i.length){for(let f=i.length;f<t.length;f++){const d=t[f].tree;l(d.tag)&&pe(d.tag),t[f].node.remove(),l(d.tag)&&de(d.tag)}t.splice(i.length,t.length-i.length)}r=!1})}function ne(e,n={},t=[""]){if(x(e)){const s=Object.assign({},n,{children:t}),i=e(s);return W(i)}if(l(e)){const s=Object.assign({},n,{children:t}),i=e(s);return ne(i.tag,i.attrs,i.children)}let r="";for(const s in n){if(s.startsWith("on")||s==="ref")continue;let i=typeof n[s]=="function"&&Oe(s)?n[s]():n[s];if(s==="className"){r+=` class=${i}`;continue}if(s==="style"&&a(i)==="object"){for(const c in i)typeof i[c]=="function"&&(i[c]=i[c]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}r+=` ${s}=${i}`}const o=W(t);return`<${e}${r}>${o}</${e}>`}function W(e){let n="";return e.forEach(t=>{if(A(t)){n+=t.toString();return}if(t instanceof Array){n+=W(t);return}if(typeof t=="function"){const r=t();n+=W([r]);return}if(a(t)==="object"){n+=ne(t.tag,t.attrs,t.children);return}console.warn(`renderToString: 不支持 ${t} 值渲染`)}),n}function ot({tag:e,attrs:n,children:t}){const r=S(e,n,t);if(et(),r instanceof DocumentFragment){const o=r.children[0];y(()=>{o.parentNode&&he()})}else r instanceof HTMLElement&&y(()=>{r.parentNode&&he()});return r}function st({tag:e,attrs:n,children:t}){le(!0);const r=ne(e,n,t);return le(!1),r}const Et=Object.freeze(Object.defineProperty({__proto__:null,Fragment:P,binding:C,computed:ve,createSignal:be,customRef:He,h,isProxy:De,isReactive:Q,isRef:Se,markRaw:Be,nextTick:y,onBeforeMount:Ze,onBeforeUnmount:tt,onMounted:Ce,onUnmounted:Xe,reactive:w,readonly:_e,ref:Y,render:ot,renderToString:st,toRaw:We,toRef:qe,toRefs:Ye,unref:Ue,watch:U,watchEffect:Ge},Symbol.toStringTag,{value:"Module"}));let m="",E,re=!0,V="";function it(e){m=e.base||"",E=e.mode||"history",re=e.isBrowser??!0,V=e.SSR_DATA_KEY||"g_initialProps"}function oe(e){const n=e.path;let t="";for(const s in e.query)t+=`&${s}=${e.query[s]}`;t=t?"?"+t:"";const r=e.hash?"#"+e.hash:"";return n+t+r}function ct(e){const n={};return e.replace("?","").split("&").forEach(r=>{const[o,s]=r.split("=");o&&s&&(n[o]=s)}),n}function q(e){return e.replace(/\/+/g,"/")}const k=w({path:"",query:{},hash:"",meta:{}});function N(e){const n=new URL(q("http://0.0.0.0/"+e));k.path=n.pathname.replace(m,"/"),k.query=ct(n.search),k.hash=n.hash}function ut(){if(!k.path&&re){let e="";E==="history"?e=location.href.replace(location.origin+m,""):e=location.hash.slice(1),N(e)}return k}function ft(e){const n=typeof e=="string"?e:oe(e);E==="history"?history.pushState({},"",q(m+"/"+n)):location.hash=n,N(n)}function at(e){const n=typeof e=="string"?e:oe(e);E==="history"?history.replaceState({},"",q(m+"/"+n)):location.hash=n,N(n)}function lt(e){history.go(e)}function se(){return{push:ft,replace:at,go:lt}}function Me(e){const n=e.component;return h(n,null)}const D=Symbol("Route");Me.prototype[D]=D;function ye(e){return typeof e=="function"&&e.prototype[D]===D}function ht(e){const n=se();return Ce(()=>{n.replace(e.to)}),h("div",null)}let me=!0;function Te(e,n=!0){const t=Y(null),r=Y(void 0);return U(()=>k.path,async o=>{const s=e.children.filter(c=>typeof c=="object"&&ye(c.tag)),i=s.find(c=>c.attrs.exact?o===c.attrs.path:(o+"/").startsWith(c.attrs.path+"/"));if(i)if(n){const c=i.attrs.component;typeof c.prototype.getInitialProps=="function"?me&&window[V]?(r.value=window[V],delete window[V],me=!1):(e.Loading&&(t.value=e.Loading),r.value=await c.prototype.getInitialProps()):r.value=void 0,t.value=c}else t.value=i.attrs.component;else{const c=s[s.length-1];typeof c=="object"&&ye(c.tag)&&!c.attrs.path?t.value=c.attrs.component:t.value=null}},{immediate:!0}),{CurrentComp:t,data:r}}function dt(e){function n(){return E==="history"?location.href.replace(location.origin+m,""):location.hash.slice(1)}N(n()),window.addEventListener("popstate",()=>{N(n())});const{CurrentComp:t,data:r}=Te(e);return h(P,null,()=>t.value?h(t.value,{data:r.value}):null)}function pt(e){let n="";if(E==="history")n=e.url.replace(m,"");else{const r=e.url.match(/#.*/);n=r?r[0]:""}N(n);const{CurrentComp:t}=Te({children:e.children,url:n},!1);return h(P,null,()=>h(t.value,{data:e.data}))}function gt(e){return h(P,null,re?h(dt,{...e}):h(pt,{...e}))}const yt={to:"/",type:"push"};function mt(e){e=Object.assign({},yt,e);const n=typeof e.to=="string"?e.to:oe(e.to),t=q(m+(E==="hash"?"#"+n:n)),r=se();function o(s){s.preventDefault(),e.type==="push"?r.push(n):r.replace(n)}return h("a",{href:t,onclick:o},e.children)}const jt=Object.freeze(Object.defineProperty({__proto__:null,Link:mt,Redirect:ht,Route:Me,Router:gt,initRouter:it,useRoute:ut,useRouter:se},Symbol.toStringTag,{value:"Module"})),B=Symbol("action");function _t(e){return typeof e=="function"&&e.prototype[B]===B}var g;class Rt{constructor(n,t){u(this,"state");u(this,"actions");ue(this,g,!0);this.state=w(O(n)),U(()=>this.state,()=>{ce(this,g)&&this._merge(n)},{deep:!0}),this.actions={};for(const r in t){let o=function(...i){j(s,g,!1);const c=t[r](...i);s._merge(n),typeof c=="object"&&c[Symbol.toStringTag]==="Promise"?c.then(()=>{s._merge(n),y(()=>j(s,g,!0))}):(s._merge(n),y(()=>j(s,g,!0)))};const s=this;o.prototype[B]=B,this.actions[r]=o}}_merge(n){const t=Object.keys(n);for(const r in n)this.state[r]=n[r];for(const r in this.state)_t(this.state[r])||!t.includes(r)&&delete this.state[r]}get store(){j(this,g,!1);const n=Object.assign(this.state,this.actions);return y(()=>j(this,g,!0)),n}}g=new WeakMap;function Ot(e,n){return()=>new Rt(e,n).store}export{P as F,mt as L,gt as R,ve as a,jt as b,Ot as c,Me as d,ot as e,h,it as i,Xe as o,Y as r,Et as v};
