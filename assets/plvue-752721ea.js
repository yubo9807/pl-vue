var Ut=Object.defineProperty;var qt=(t,n,e)=>n in t?Ut(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var u=(t,n,e)=>(qt(t,typeof n!="symbol"?n+"":n,e),e),pt=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var gt=(t,n,e)=>(pt(t,n,"read from private field"),e?e.call(t):n.get(t)),yt=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},T=(t,n,e,r)=>(pt(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e);function et(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function m(t){return["object","array"].includes(et(t))}function Kt(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function nt(t,n){if(m(t)&&m(n)){const e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;for(const s of e)if(!r.includes(s)||!nt(t[s],n[s]))return!1;return!0}else return t===n}function p(t){return et(t)==="object"}function V(t){return Array.isArray(t)}function Y(t){return typeof t=="string"}function _(t){Promise.resolve().then(t)}function zt(){return Number(Math.random().toString().slice(2)).toString(32)}function R(...t){console.warn(...t)}let $=null;const D=new WeakMap;function C(t){$=t,t(),$=null}function Yt(t){const n=D.get(t)||[],e=n.some(r=>$===r);$&&!e&&(n.push($),D.set(t,n))}function mt(t){const n=D.get(t);n&&n.forEach((e,r)=>{const s=e();typeof s=="boolean"&&s&&(n.splice(r,1),D.set(t,n))})}function Ot(t){return Reflect.defineProperty(t,k.IS_READONLY,{value:!0}),new Proxy(t,{get(n,e){return e===k.RAW?n:Reflect.get(n,e)},set(n,e,r){const s=Reflect.get(n,e);return R(`Set operation on key '${e.toString()}' failed: target is readonly.`,{[e.toString()]:s}),s},deleteProperty(n,e){const r=Reflect.get(n,e);return R(`Delete operation on key '${e.toString()}' failed: target is readonly.`,{[e.toString()]:r}),r}})}function Ht(t){return t&&Ot(t)[k.IS_READONLY]}const Mt=new WeakMap,J=new WeakMap,k={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function w(t){if(!m(t)||Object.isFrozen(t))return R(`lue cannot be made reactive: ${t}`),t;if(Mt.get(t))return t;let n=null;return new Proxy(t,{get(e,r,s){if(r===k.RAW)return e;Yt(e);const o=Reflect.get(e,r,s);return m(o)?w(o):o},set(e,r,s,o){if(e[k.IS_READONLY])return!0;if(m(e[r])){for(const l in s)this.set(e[r],l,s[l],o[r]);return!0}if(Reflect.get(e,r,o)===s)return!0;const c=Reflect.set(e,r,s,o),f=J.get(e)||new Set;f.add(r);const a=f.size;return J.set(e,f),_(()=>{const l=Reflect.get(e,r,o);c&&l===s&&a===1&&mt(e),J.delete(e)}),c},deleteProperty(e,r){Reflect.get(e,r),Kt(e,r);const s=Reflect.deleteProperty(e,r);return n=r,_(()=>{r===n&&(mt(e),n=null)}),s}})}function rt(t){return!!t[k.RAW]}function Jt(t){return rt(t)?t[k.RAW]:t}function Qt(t){return rt(t)||Ht(t)}function Gt(t){return m(t)&&Mt.set(t,!0),t}function Tt(t){const n=w({value:t});function e(){return n.value}function r(s){n.value=s}return[e,r]}const ot="__v_isRef";var Te;class jt{constructor(n){u(this,Te,!0);u(this,"__v_isShallow",!1);u(this,"_rawValue");u(this,"_value");u(this,"getSignal");u(this,"setSignal");this._rawValue=n;const[e,r]=Tt(n);this.getSignal=e,this.setSignal=r,this._value=e()}get value(){return this.getSignal()}set value(n){this.setSignal(n),this._rawValue=n}}Te=ot;function Xt(t){return new jt(t)}function Ct(t){return t&&!!t[ot]}function Zt(t){return Ct(t)?t.value:t}class xt{constructor(n,e,r=void 0){u(this,"__v_isRef",!0);u(this,"_defaultValue");u(this,"_key");u(this,"_object");this._defaultValue=r,this._key=e,this._object=n}get value(){return this._object[this._key]}set value(n){this._object[this._key]=n}}function vt(t,n,e=void 0){return new xt(t,n,e)}function te(t){const n={};for(const e in t)n[e]=new xt(t,e);return n}class ee extends jt{constructor(e){let r=!1;const{get:s,set:o}=e(()=>r=!0,()=>this.setValue());super(s());u(this,"_get");u(this,"_set");this.__v_isRef=r,this._get=s,this._set=o}get value(){return this.__v_isRef?super.value:this._get()}set value(e){this._set(e)}setValue(){super.value=this._get()}}function ne(t){return new ee(t)}class re{constructor(n){u(this,"fn");this.fn=n}}var je;class _t{constructor(n,e){u(this,"__v_isReadonly",!0);u(this,je,!0);u(this,"_cacheable",!0);u(this,"_dirty",!0);u(this,"computed");u(this,"_setter");this.computed=new re(n),this._setter=e}get value(){return this.computed.fn()}set value(n){this._setter?this._setter(n):R("Write operation failed: computed value is readonly")}}je=ot;function oe(t){return typeof t=="function"?new _t(t):new _t(t.get,t.set)}const E=function(){const t=new WeakMap,n=["null","weakset","weakmap"],e={set(r){const s=new Set;for(const o of r)s.add(E(o));return s},map(r){const s=new Map;for(const[o,i]of r.entries())s.set(o,E(i));return s}};return function(r){const s=et(r);if(typeof r!="object"||n.includes(s))return r;if(t.has(r))return t.get(r);if(e[s])return e[s](r);const o=V(r)?[]:{};Object.setPrototypeOf(o,Object.getPrototypeOf(r)),t.set(r,o);for(const i in r)o[i]=E(r[i]);return o}}();function x(t,n){return Object.assign({},t,n)}function H(t,n,e={}){let r=!1;if(r)return;const s=t();let o=E(s);return e.immediate&&n(s,void 0),C(()=>{const i=[];if(r)return i.length>0&&i.forEach(f=>f()),!0;const c=t();m(s)?e.deep&&!nt(c,o)&&(n(c,w(o)),o=E(c),Nt(c).forEach(f=>{const a=H(()=>f,()=>{n(c,w(o))},{deep:!0});i.push(a)})):c!==o&&(n(c,o),o=E(c))}),()=>{r=!0}}function Nt(t,n=[]){for(const e in t)m(t[e])&&(n.push(t[e]),Nt(t[e],n));return n}function se(t){let n=!1,e=!1;return C(()=>{if(n)return!0;t(r=>{e&&r(),e=!0})}),()=>{n=!0}}function A(t){return["string","number"].includes(typeof t)&&t!==""}function At(t){return!/^on/.test(t)}function st(t){return p(t)&&(Y(t.tag)||P(t.tag))}function h(t){return typeof t=="function"&&!P(t)}function it(t){return[void 0,null,"",!0,!1].includes(t)}function F(t){return document.createTextNode(t)}function d(t,n,...e){const r={tag:t,attrs:n||{},children:e};return h(r.tag)&&r.children.length===0&&r.attrs.children&&(r.children=r.attrs.children),r}function I({children:t}){return t}const B=Symbol("Fragment");I.prototype[B]=B;function P(t){return typeof t=="function"&&t.prototype[B]===B}let L=!1;function Rt(t){L=t}const Q=[];let Pt=!1;function $t(t){if(!L){if(Pt){_(t);return}Q.push(t)}}function St(){Q.forEach(t=>{t()}),Q.length=0,Pt=!0}const Vt=new WeakMap;function Ft(t,n=[]){return t.forEach(e=>{p(e)&&(h(e.tag)?n.push({comp:e.tag,compId:e.tag.prototype._id,props:x(e.attrs,{children:t})}):A(e.tag)&&Ft(e.children,n))}),n}function ct(t,n=[]){const e=Vt.get(t)||[];return n.push(...e),e.forEach(r=>{const s=ct(r.comp);n.push(...s)}),n}const G=new Map;function ie(t,n){if(L)return;const e=t.prototype._id,r=G.get(e)||[];r.some(o=>o===n)||(r.push(n),G.set(e,r))}function wt(t){const n=ct(t).map(r=>r.compId);n.unshift(t.prototype._id);const e=[];n.forEach(r=>{const s=G.get(r)||[];e.push(...s)}),e.forEach(r=>{r()})}const X=[];let It=!1;function ce(t){if(!L){if(It){t();return}X.push(t)}}function ue(){X.forEach(t=>{t()}),X.length=0,It=!0}const Z=new Map;function fe(t,n){if(L)return;const e=t.prototype._id,r=Z.get(e)||[];r.some(o=>o===n)||(r.push(n),Z.set(e,r))}function bt(t){const n=ct(t).map(r=>r.compId);n.unshift(t.prototype._id);const e=[];n.forEach(r=>{const s=Z.get(r)||[];e.push(...s)}),e.forEach(r=>{r()})}function O(t,n,e){if(Y(t))return ut(t,n,e);if(P(t))return U(e);if(h(t)){const r=x(n,{children:e});t.prototype._id=zt();const s=t(r);return A(s)?F(s):(Vt.set(t,Ft(s.children)),O(s.tag,s.attrs,s.children))}}function ut(t,n={},e=[""]){if(P(t))return O(t,n,e);const r=document.createElement(t);e.forEach(s=>{if(!it(s)){if(A(s)){const o=F(s);o.nodeValue=s,r.appendChild(o);return}if(typeof s=="function"){const o=U([s]);r.appendChild(o);return}if(V(s)){const o=U(s);r.appendChild(o);return}if(st(s)){const o=ut(s.tag,s.attrs,s.children);r.appendChild(o);return}if(p(s)&&h(s.tag)){const o=O(s.tag,s.attrs,s.children);r.appendChild(o);return}R(`render: 不支持 ${s} 值渲染`)}});for(const s in n){const o=n[s];r[s]=o,s==="ref"&&(o.value=r),typeof o=="function"&&At(s)&&C(()=>{r[s]=o()})}if(n.style&&p(n.style))for(const s in n.style){const o=n.style[s];typeof o=="function"?C(()=>r.style[s]=o()):r.style[s]=o}return r}function U(t){const n=document.createDocumentFragment();return t.forEach(e=>{if(!it(e)){if(A(e)){const r=F(e);r.nodeValue=e,n.appendChild(r);return}if(typeof e=="function"){le(n,e);return}if(V(e)){const r=U(e);n.appendChild(r);return}if(st(e)){const r=ut(e.tag,e.attrs,e.children);n.appendChild(r);return}if(p(e)&&h(e.tag)){const r=O(e.tag,e.attrs,e.children);n.appendChild(r);return}R(`render: 不支持 ${e} 值渲染`)}}),n}function Et(t){if(A(t))return F(t);if(st(t)||p(t)&&h(t.tag))return O(t.tag,t.attrs,t.children)}function le(t,n){let e=[],r=!0,s=null;const o=F("");t.appendChild(o),C(()=>{let i=n();if(i&&p(i)&&P(i.tag)){R("不支持响应式节点片段渲染");return}V(i)||(i=[i]),i=i.filter(f=>!it(f));let c=0;for(;c<i.length;){let f=i[c];const a=c,l=e.findIndex(g=>g.key===a);if(l>=0){if(nt(f,e[l].tree)){c++;continue}const g=Et(f),b=e[l].tree;h(b.tag)&&bt(b.tag),e[l].node.parentElement.replaceChild(g,e[l].node),h(b.tag)&&wt(b.tag),e[l].tree=f,e[l].node=g}else{const g=Et(f);if(r)t.appendChild(g);else if(e.length===0)s??(s=o.parentElement),s.insertBefore(g,o.nextSibling);else{const b=e[e.length-1].node,Bt=b.nextSibling;b.parentElement.insertBefore(g,Bt)}e.push({key:a,tree:f,node:g})}c++}if(e.length>i.length){for(let f=i.length;f<e.length;f++){const a=e[f].tree;h(a.tag)&&bt(a.tag),e[f].node.remove(),h(a.tag)&&wt(a.tag)}e.splice(i.length,e.length-i.length)}r=!1})}function ft(t,n={},e=[""]){if(P(t)){const o=x(n,{children:e}),i=t(o);return q(i)}if(h(t)){const o=x(n,{children:e}),i=t(o);return ft(i.tag,i.attrs,i.children)}let r="";for(const o in n){if(o.startsWith("on")||o==="ref")continue;let i=typeof n[o]=="function"&&At(o)?n[o]():n[o];if(o==="className"){r+=` class=${i}`;continue}if(o==="style"&&p(i)){for(const c in i)typeof i[c]=="function"&&(i[c]=i[c]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}r+=` ${o}=${i}`}const s=q(e);return`<${t}${r}>${s}</${t}>`}function q(t){let n="";return t.forEach(e=>{if(A(e)){n+=e.toString();return}if(V(e)){n+=q(e);return}if(typeof e=="function"){const r=e();n+=q([r]);return}if(p(e)){n+=ft(e.tag,e.attrs,e.children);return}R(`renderToString: 不支持 ${e} 值渲染`)}),n}function ae({tag:t,attrs:n,children:e}){const r=O(t,n,e);if(ue(),r instanceof DocumentFragment){const s=r.children[0];_(()=>{s.parentNode&&St()})}else r instanceof HTMLElement&&_(()=>{r.parentNode&&St()});return r}function he({tag:t,attrs:n,children:e}){Rt(!0);const r=ft(t,n,e);return Rt(!1),r}const xe=Object.freeze(Object.defineProperty({__proto__:null,Fragment:I,binding:C,computed:oe,createSignal:Tt,customRef:ne,h:d,isProxy:Qt,isReactive:rt,isRef:Ct,markRaw:Gt,nextTick:_,onBeforeMount:ce,onBeforeUnmount:fe,onMounted:$t,onUnmounted:ie,reactive:w,readonly:Ot,ref:Xt,render:ae,renderToString:he,toRaw:Jt,toRef:vt,toRefs:te,unref:Zt,watch:H,watchEffect:se},Symbol.toStringTag,{value:"Module"}));let S="",M,lt=!0,v="";function de(t){S=t.base||"/",/(^\/$|^\/.+\/$)/.test(S)||R("base 必须以 / 开头 / 结尾"),M=t.mode||"history",lt=t.isBrowser??!0,v=t.SSR_DATA_KEY||"g_initialProps"}function at(t){if(Y(t))return t;t=t;const n=t.path;let e="";for(const o in t.query)e+=`&${o}=${t.query[o]}`;e=e?"?"+e:"";const r=t.hash?"#"+t.hash:"";return n+e+r}function pe(t){const n={};return t.replace("?","").split("&").forEach(r=>{const[s,o]=r.split("=");s&&o&&(n[s]=o)}),n}function W(t){return t.replace(/\/+/g,"/")}const j=w({path:"",query:{},hash:"",meta:{}});function N(t){const n=new URL(W("http://0.0.0.0/"+t));j.path=n.pathname.replace(S,"/"),j.query=pe(n.search),j.hash=n.hash}function ge(){if(!j.path&&lt){let t="";M==="history"?t=location.href.replace(location.origin+S,""):t=location.hash.slice(1),N(t)}return j}function ye(t){const n=at(t);M==="history"?history.pushState({},"",W(S+"/"+n)):location.hash=n,N(n)}function me(t){const n=at(t);M==="history"?history.replaceState({},"",W(S+"/"+n)):location.hash=n,N(n)}function _e(t){history.go(t)}function ht(){return{push:ye,replace:me,go:_e}}function Lt(t){t.exact??(t.exact=!0);const n=t.component;return d(n,null)}const K=Symbol("Route");Lt.prototype[K]=K;function tt(t){return typeof t=="function"&&t.prototype[K]===K}function Re(t){const n=ht();return $t(()=>{n.replace(t.to)}),d("div",null)}const z=Symbol("action");function Se(t){return typeof t=="function"&&t.prototype[z]===z}var y;class we{constructor(n,e){u(this,"state");u(this,"actions");yt(this,y,!0);this.state=w(E(n)),H(()=>this.state,()=>{gt(this,y)&&this._merge(n)},{deep:!0}),this.actions={};for(const r in e){let s=function(...i){T(o,y,!1);const c=e[r](...i);o._merge(n),m(c)&&c[Symbol.toStringTag]==="Promise"?c.then(()=>{o._merge(n),_(()=>T(o,y,!0))}):(o._merge(n),_(()=>T(o,y,!0)))};const o=this;s.prototype[z]=z,this.actions[r]=s}}_merge(n){const e=Object.keys(n);for(const r in n)this.state[r]=n[r];for(const r in this.state)Se(this.state[r])||!e.includes(r)&&delete this.state[r]}get store(){T(this,y,!1);const n=Object.assign(this.state,this.actions);return _(()=>T(this,y,!0)),n}}y=new WeakMap;function Ne(t,n){return()=>new we(t,n).store}let kt=!0;function Wt(t,n=!0){const e=w({tag:"",attrs:{},children:[]});return H(()=>j.path,async r=>{const s=t.children.filter(i=>p(i)&&tt(i.tag)),o=Dt(s,r);if(o){n&&typeof o.tag.prototype.getInitialProps=="function"&&(kt&&window[v]?(delete window[v],kt=!1):t.Loading&&(e.tag=t.Loading));for(const i in o)e[i]=o[i]}},{immediate:!0}),{currentTree:e}}function Dt(t,n){const e=t.find(o=>o.attrs.exact||o.attrs.exact===void 0?n===o.attrs.path:(n+"/").startsWith(W(o.attrs.path+"/")));if(!e)return null;const r={tag:"",attrs:{},children:[]};r.tag=e.attrs.component;const s=[Dt(e.children,n)].filter(o=>o);if(r.children=s,s.length===0){const o=e.children[e.children.length-1];o&&tt(o.tag)&&!o.attrs.path&&(r.children=[x(r,{tag:o.attrs.component})])}if(e.attrs.exact===!1&&r.children.length===0){const o=t[t.length-1];if(o&&tt(o.tag)&&!o.attrs.path)return r.tag=o.attrs.component,r}return r}function be(t){function n(){return M==="history"?location.href.replace(location.origin+S,""):location.hash.slice(1)}N(n()),window.addEventListener("popstate",()=>{N(n())});const{currentTree:e}=Wt(t);return d(I,null,dt(e))}function dt(t){return()=>t.tag?d(t.tag,null,t.children.length>0?dt(t.children[0]):null):null}function Ee(t){let n="";if(M==="history")n=t.url.replace(S,"");else{const r=t.url.match(/#.*/);n=r?r[0]:""}N(n);const{currentTree:e}=Wt({children:t.children,url:n},!1);return d(I,null,dt(e))}function ke(t){return d(I,null,lt?d(be,{...t}):d(Ee,{...t}))}const Oe={to:"/",type:"push"};function Me(t){t=x(Oe,t);const n=Y(t.to)?t.to:at(t.to),e=W(S+(M==="hash"?"#"+n:n)),r=ht();function s(o){o.preventDefault(),t.type==="push"?r.push(n):r.replace(n)}return d("a",{href:e,onclick:s},t.children)}const Ae=Object.freeze(Object.defineProperty({__proto__:null,Link:Me,Redirect:Re,Route:Lt,Router:ke,initRouter:de,useRoute:ge,useRouter:ht},Symbol.toStringTag,{value:"Module"}));export{I as F,Me as L,ke as R,oe as a,Ae as b,Ne as c,Lt as d,ae as e,d as h,de as i,ie as o,Xt as r,xe as v};
