(()=>{"use strict";function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e){return"object"==typeof e}function n(e){return["string","number"].includes(typeof e)}let o=null;const r=new WeakMap;function l(e){o=e,e(),o=null}function c(e){const t=r.get(e);t&&t.forEach(((n,o)=>{const l=n();"boolean"==typeof l&&l&&(t.splice(o,1),r.set(e,t))}))}const i=new WeakMap,u={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function a(e){return!t(e)||i.get(e)?e:new Proxy(e,{get(e,n,l){if(n===u.RAW)return e;!function(e){const t=r.get(e)||[];o&&t.push(o),r.set(e,t)}(e);const c=Reflect.get(e,n,l);return t(c)?a(c):c},set(e,t,n,o){const r=Reflect.get(e,t,o),l=Reflect.set(e,t,n,o);return e[u.IS_READONLY]?r:(l&&r!==n&&c(e),l)},deleteProperty(e,t){const n=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t),o=Reflect.deleteProperty(e,t);return n&&o&&c(e),o}})}class s{__v_isRef=!0;__v_isShallow=!1;_rawValue;_value;constructor(e){this._rawValue=e,this._value=t(e)?a(e):a({value:e})}get value(){return t(this._rawValue)?this._value:this._value.value}set value(e){this._rawValue=e,t(e)?this._value=e:this._value.value=e}}function f(e,t,...n){return{tag:e,attrs:t||{},children:n}}function d({children:e}){return e}const p=Symbol("Fragment");function h(t){return t instanceof Array?function(e){let t=new Array(e.length);for(let n=0;n<t.length;n++)t[n]=h(e[n]);return t}(t):"object"===e(t)?function(e){let t={},n=Object.getOwnPropertyNames(e);for(let o=0;o<n.length;o++)t[n[o]]=h(e[n[o]]);return t}(t):t}function y(t,o={},r=""){if(![void 0,null,"",!0,!1].includes(r)){if("string"==typeof t)return function(t,o={},r=""){const c=document.createElement(t);r instanceof Array?r.forEach((t=>{if(t instanceof Array)c.appendChild(g(t));else if("object"===e(t)){const e=y(t.tag,t.attrs,t.children);c.appendChild(e)}else if(n(t)){const e=document.createTextNode(t.toString());c.appendChild(e)}else if("function"==typeof t){const o=document.createTextNode("");let r=null;l((()=>{const l=t();if(n(l))o.nodeValue=l.toString(),null!==r&&r.parentElement.replaceChild(o,r),r=o;else if("object"===e(l)){const e=y(l.tag,l.attrs,l.children);r?r.parentElement.replaceChild(e,r):c.appendChild(e),r=e}})),c.appendChild(o)}})):n(r)?c.innerText=r.toString():"function"==typeof r&&l((()=>{c.innerText=r().toString()}));for(const e in o)c[e]=o[e];if(o.style&&o.style instanceof Object)for(const e in o.style){const t=o.style[e];"function"==typeof t?l((()=>c.style[e]=t())):c.style[e]=t}return c}(t,o,r);if("function"==typeof t){if(t.prototype[p]===p)return g(r);const e=t(h(Object.assign({},o,{children:r})));return y(e.tag,e.attrs,e.children)}}}function g(t){const o=document.createDocumentFragment();if(t instanceof Array)t.forEach((t=>{if(n(t)){const e=document.createTextNode(t.toString());o.appendChild(e)}else if("object"===e(t)){const e=y(t.tag,t.attrs,t.children);o.appendChild(e)}else if("function"==typeof t){const e=document.createTextNode("");l((()=>{e.nodeValue=t().toString()})),o.appendChild(e)}}));else if(n(t)){const e=document.createTextNode(t);o.appendChild(e)}else if("function"==typeof t){const e=document.createTextNode("");l((()=>{e.nodeValue=t().toString()})),o.appendChild(e)}return o}d.prototype[p]=p;const _="demo__bac49";function m(e){return console.log(e.children),f("div",null,f("p",null,"子组件"),f("p",null,"props: ",e.count),f("p",null,e.children))}document.getElementById("root").appendChild(function({tag:e,attrs:t,children:n}){return y(e,t,n)}(f((function(){const e=new s(1);return f(d,null,"父组件",f("h1",{className:_},(()=>e.value)),f(m,{count:()=>e.value},f("p",null,"插槽1"),f("p",null,"插槽2")),f("button",{onclick:()=>e.value++},"click"))}),null)))})();