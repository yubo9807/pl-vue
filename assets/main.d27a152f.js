(()=>{"use strict";function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e){return"object"==typeof e}function n(e,t){if("object"==typeof e&&"object"==typeof t){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const c of r){if(!o.includes(c))return!1;if(!n(e[c],t[c]))return!1}return!0}return e===t}function r(e){return["string","number"].includes(typeof e)&&""!==e}function o(e){return["className","innerHTML","innerText","textContent"].includes(e)}let c=null;const l=new WeakMap;function i(e){c=e,e(),c=null}function u(e){const t=l.get(e);t&&t.forEach(((n,r)=>{const o=n();"boolean"==typeof o&&o&&(t.splice(r,1),l.set(e,t))}))}const s=new WeakMap,a={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function f(e){return!t(e)||s.get(e)?e:new Proxy(e,{get(e,n,r){if(n===a.RAW)return e;!function(e){const t=l.get(e)||[];c&&t.push(c),l.set(e,t)}(e);const o=Reflect.get(e,n,r);return t(o)?f(o):o},set(e,t,n,r){const o=Reflect.get(e,t,r),c=Reflect.set(e,t,n,r);return e[a.IS_READONLY]?o:(c&&o!==n&&u(e),c)},deleteProperty(e,t){const n=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t),r=Reflect.deleteProperty(e,t);return n&&r&&u(e),r}})}class d{__v_isRef=!0;__v_isShallow=!1;_rawValue;_value;constructor(e){this._rawValue=e,this._value=t(e)?f(e):f({value:e})}get value(){return t(this._rawValue)?this._value:this._value.value}set value(e){this._rawValue=e,t(e)?this._value=e:this._value.value=e}}function p(e,t,...n){return{tag:e,attrs:t||{},children:n}}function h({children:e}){return e}const y=Symbol("Fragment");function g(e){return"function"==typeof e&&e.prototype[y]===y}function _(t){return t instanceof Array?function(e){let t=new Array(e.length);for(let n=0;n<t.length;n++)t[n]=_(e[n]);return t}(t):"object"===e(t)?function(e){let t={},n=Object.getOwnPropertyNames(e);for(let r=0;r<n.length;r++)t[n[r]]=_(e[n[r]]);return t}(t):t}function b(t,n={},r=[]){if("function"==typeof t&&!g(t)){const e=t(_(Object.assign({},n,{children:r})));return b(e.tag,e.attrs,e.children)}const o=[];return r.forEach((t=>{if("object"===e(t)){const e=b(t.tag,t.attrs,t.children);o.push(e)}else o.push(t)})),{tag:t,attrs:n,children:o}}function m(e,t,n){return"string"==typeof e?v(e,t,n):g(e)?j(n):void 0}function v(t,n={},c=[""]){if(g(t))return m(t,n,c);const l=document.createElement(t);c.forEach((t=>{if(r(t)){const e=document.createTextNode(t);return e.nodeValue=t,void l.appendChild(e)}if("function"!=typeof t)if(t instanceof Array){const e=j(t);l.appendChild(e)}else if("object"!==e(t));else{const e=v(t.tag,t.attrs,t.children);l.appendChild(e)}else{const e=j([t]);l.appendChild(e)}}));for(const e in n){const t=n[e];l[e]=t,"function"==typeof t&&o(e)&&i((()=>{l[e]=t()}))}if(n.style&&n.style instanceof Object)for(const e in n.style){const t=n.style[e];"function"==typeof t?i((()=>l.style[e]=t())):l.style[e]=t}return l}function j(t){const o=document.createDocumentFragment();return t.forEach((t=>{if(r(t)){const e=document.createTextNode(t);return e.nodeValue=t,void o.appendChild(e)}if("function"==typeof t){const c=document.createTextNode("");let l=[],u=0;return i((()=>{let c=t();if(c instanceof Array||(c=[c]),c=c.filter((e=>e)),c.forEach(((t,c)=>{const i=c,s=l.findIndex((e=>e.key===i));if(s>=0){if(n(t,l[s].tree))return;let o=null;r(t)?o=document.createTextNode(t.toString()):"object"===e(t)&&(o=m(t.tag,t.attrs,t.children)),l[s].node.parentElement.replaceChild(o,l[s].node),l[s].tree=t,l[s].node=o}else{let n=null;if(r(t)?n=document.createTextNode(t.toString()):"object"===e(t)&&(n=m(t.tag,t.attrs,t.children)),0===u)o.appendChild(n);else{const e=l[l.length-1].node,t=e.nextSibling;e.parentElement.insertBefore(n,t)}l.push({key:i,tree:t,node:n})}})),l.length>c.length)for(let e=c.length;e<l.length;e++)l[e].node.remove();u++})),void o.appendChild(c)}if(t instanceof Array){const e=j(t);o.appendChild(e)}else if("object"!==e(t));else{const e=v(t.tag,t.attrs,t.children);o.appendChild(e)}})),o}h.prototype[y]=y;const w="demo__bac49";function C(e){return p("div",null,p("p",null,"子组件"),p("p",null,"props: ",e.count),p("p",null,e.children))}document.getElementById("root").appendChild(function({tag:e,attrs:t,children:n}){const r=b(e,t,n);return m(r.tag,r.attrs,r.children)}(p((function(){const e=new d(1);return p(h,null,"父组件",p("h1",{className:w},(()=>e.value)),p(C,{count:()=>e.value},p("p",null,"插槽1"),p("p",null,"插槽2")),p("button",{onclick:()=>e.value++},"click"))}),null)))})();