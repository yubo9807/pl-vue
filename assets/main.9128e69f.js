(()=>{"use strict";function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(t){return"object"==typeof t}function n(t){return["string","number"].includes(typeof t)&&""!==t}function o(t){return["className","innerHTML","innerText","textContent"].includes(t)}let r=null;const c=new WeakMap;function l(t){r=t,t(),r=null}function u(t){const e=c.get(t);e&&e.forEach(((n,o)=>{const r=n();"boolean"==typeof r&&r&&(e.splice(o,1),c.set(t,e))}))}const i=new WeakMap,s={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function a(t){return!e(t)||i.get(t)?t:new Proxy(t,{get(t,n,o){if(n===s.RAW)return t;!function(t){const e=c.get(t)||[];r&&e.push(r),c.set(t,e)}(t);const l=Reflect.get(t,n,o);return e(l)?a(l):l},set(t,e,n,o){const r=Reflect.get(t,e,o),c=Reflect.set(t,e,n,o);return t[s.IS_READONLY]?r:(c&&r!==n&&u(t),c)},deleteProperty(t,e){const n=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,e),o=Reflect.deleteProperty(t,e);return n&&o&&u(t),o}})}class f{__v_isRef=!0;__v_isShallow=!1;_rawValue;_value;constructor(t){this._rawValue=t,this._value=e(t)?a(t):a({value:t})}get value(){return e(this._rawValue)?this._value:this._value.value}set value(t){this._rawValue=t,e(t)?this._value=t:this._value.value=t}}function p(t,e,...n){return{tag:t,attrs:e||{},children:n}}function d({children:t}){return t}const h=Symbol("Fragment");function y(t){return"function"==typeof t&&t.prototype[h]===h}function g(e){return e instanceof Array?function(t){let e=new Array(t.length);for(let n=0;n<e.length;n++)e[n]=g(t[n]);return e}(e):"object"===t(e)?function(t){let e={},n=Object.getOwnPropertyNames(t);for(let o=0;o<n.length;o++)e[n[o]]=g(t[n[o]]);return e}(e):e}function _(e,n={},o=[]){if("function"==typeof e&&!y(e)){const t=e(g(Object.assign({},n,{children:o})));return _(t.tag,t.attrs,t.children)}const r=[];return o.forEach((e=>{if("object"===t(e)){const t=_(e.tag,e.attrs,e.children);r.push(t)}else r.push(e)})),{tag:e,attrs:n,children:r}}function v(t,e,n){return"string"==typeof t?m(t,e,n):y(t)?b(n):void 0}function m(e,r={},c=[""]){if(y(e))return v(e,r,c);const u=document.createElement(e);c.forEach((e=>{if(n(e)){const t=document.createTextNode(e);return t.nodeValue=e,void u.appendChild(t)}if("function"!=typeof e)if(e instanceof Array){const t=b(e);u.appendChild(t)}else if("object"!==t(e));else{const t=m(e.tag,e.attrs,e.children);u.appendChild(t)}else{const t=b([e]);u.appendChild(t)}}));for(const t in r){const e=r[t];u[t]=e,"function"==typeof e&&o(t)&&l((()=>{u[t]=e()}))}if(r.style&&r.style instanceof Object)for(const t in r.style){const e=r.style[t];"function"==typeof e?l((()=>u.style[t]=e())):u.style[t]=e}return u}function b(e){const o=document.createDocumentFragment();return e.forEach((e=>{if(n(e)){const t=document.createTextNode(e);return t.nodeValue=e,void o.appendChild(t)}if("function"==typeof e){const r=document.createTextNode("");let c=null;return l((()=>{const l=e();if(n(l))r.nodeValue=l.toString(),null!==c&&c.parentElement.replaceChild(r,c),c=r;else if("object"===t(l)){const t=v(l.tag,l.attrs,l.children);c?c.parentElement.replaceChild(t,c):o.appendChild(t),c=t}else l instanceof Array&&console.warn("暂不支持直接返回一个数组，请包裹一层标签")})),void o.appendChild(r)}if(e instanceof Array){const t=b(e);o.appendChild(t)}else if("object"!==t(e));else{const t=m(e.tag,e.attrs,e.children);o.appendChild(t)}})),o}d.prototype[h]=h;const w="demo__bac49";function C(t){return p("div",null,p("p",null,"子组件"),p("p",null,"props: ",t.count),p("p",null,t.children))}document.getElementById("root").appendChild(function({tag:t,attrs:e,children:n}){const o=_(t,e,n);return v(o.tag,o.attrs,o.children)}(p((function(){const t=new f(1);return p(d,null,"父组件",p("h1",{className:w},(()=>t.value)),p(C,{count:()=>t.value},p("p",null,"插槽1"),p("p",null,"插槽2")),p("button",{onclick:()=>t.value++},"click"))}),null)))})();