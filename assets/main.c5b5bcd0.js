(()=>{"use strict";function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(e){return["object","array"].includes(t(e))}function n(t,e){if("object"==typeof t&&"object"==typeof e){const o=Object.keys(t),r=Object.keys(e);if(o.length!==r.length)return!1;for(const c of o){if(!r.includes(c))return!1;if(!n(t[c],e[c]))return!1}return!0}return t===e}function o(t){if(void 0!==typeof Promise)Promise.resolve().then(t);else if(void 0!==typeof MutationObserver){const e=new MutationObserver(t),n=document.createTextNode("0");e.observe(n,{characterData:!0}),n.data="1"}else void 0!==typeof process?process.nextTick(t):setTimeout(t,0)}let r=null;const c=new WeakMap;function i(t){r=t,t(),r=null}function s(t){const e=c.get(t);e&&e.forEach(((n,o)=>{const r=n();"boolean"==typeof r&&r&&(e.splice(o,1),c.set(t,e))}))}const l=new WeakMap,a={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function u(t){return!e(t)||l.get(t)?t:new Proxy(t,{get(t,n,o){if(n===a.RAW)return t;!function(t){const e=c.get(t)||[],n=e.some((t=>r===t));r&&!n&&e.push(r),c.set(t,e)}(t);const i=Reflect.get(t,n,o);return e(i)?u(i):i},set(t,e,n,r){const c=Reflect.get(t,e,r),i=Reflect.set(t,e,n,r);return t[a.IS_READONLY]?c:(o((()=>{const o=Reflect.get(t,e,r);i&&c!==n&&o===n&&s(t)})),i)},deleteProperty(t,e){const n=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,e),o=Reflect.deleteProperty(t,e);return n&&o&&s(t),o}})}const f="__v_isRef";class h{[f]=!0;__v_isShallow=!1;_rawValue;_value;constructor(t){this._rawValue=t,this._value=e(t)?u(t):u({value:t})}get value(){return e(this._rawValue)?this._value:this._value.value}set value(t){this._rawValue=t,e(t)?this._value=t:this._value.value=t}}class d{fn;constructor(t){this.fn=t}}class p{__v_isReadonly=!0;[f]=!0;_cacheable=!0;_dirty=!0;computed;_setter;constructor(t,e){this.computed=new d(t),this._setter=e}get value(){return this.computed.fn()}set value(t){this._setter?this._setter(t):console.warn("Write operation failed: computed value is readonly")}}function g(e){return e instanceof Array?function(t){let e=new Array(t.length);for(let n=0;n<e.length;n++)e[n]=g(t[n]);return e}(e):"object"===t(e)?function(t){let e={},n=Object.getOwnPropertyNames(t);for(let o=0;o<n.length;o++)e[n[o]]=g(t[n[o]]);return e}(e):e}function y(t,e,o={}){let r=!1;if(r)return;const c=t();let s=g(c);return o.immediate&&e(c,void 0),i((()=>{if(r)return!0;const c=t();(o.deep?n(c,s):c===s)||(e(c,u(s)),s=g(c))})),()=>{r=!0}}function m(t,e,...n){return{tag:t,attrs:e||{},children:n}}function v({children:t}){return t}const b=Symbol("Fragment");function _(t){return"function"==typeof t&&t.prototype[b]===b}function w(t){return["string","number"].includes(typeof t)&&""!==t}function j(t){return["className","innerHTML","innerText","textContent"].includes(t)}function E(e){return"object"===t(e)&&("string"==typeof e.tag||_(e.tag))}function R(t){return"function"==typeof t&&!_(t)}v.prototype[b]=b;let O=!1;function C(e,n){O=!0;const o=e();o&&"object"===t(o)&&o.children.forEach((t=>{if(R(t.tag)){const{tag:e,attrs:o,children:r}=t,c=Object.assign({},o,{children:r});n((()=>e(c)))}})),O=!1}const k=[];let x=!1;function N(){k.forEach((t=>{t()})),k.length=0,x=!0}const S=new WeakMap;function T(t){const e=S.get(t)||[];0!==e.length&&(e.forEach((t=>t())),S.delete(t),C(t,T))}const A=[];let M=!1;const P=new WeakMap;function W(t){const e=P.get(t)||[];0!==e.length&&(e.forEach((t=>t())),P.delete(t),C(t,W))}function L(t,e,n){if("string"==typeof t)return V(t,e,n);if(_(t))return D(n);if(R(t)){const o=t(Object.assign({},e,{children:n}));return L(o.tag,o.attrs,o.children)}}function V(e,n={},o=[""]){if(_(e))return L(e,n,o);const r=document.createElement(e);o.forEach((e=>{if(w(e)){const t=document.createTextNode(e);return t.nodeValue=e,void r.appendChild(t)}if("function"!=typeof e)if(e instanceof Array){const t=D(e);r.appendChild(t)}else if(E(e)){const t=V(e.tag,e.attrs,e.children);r.appendChild(t)}else if("object"===t(e)&&R(e.tag)){const t=L(e.tag,e.attrs,e.children);r.appendChild(t)}else console.warn(`render: 不支持 ${e} 值渲染`);else{const t=D([e]);r.appendChild(t)}}));for(const t in n){const e=n[t];r[t]=e,"ref"===t&&(e.value=r),"function"==typeof e&&j(t)&&i((()=>{r[t]=e()}))}if(n.style&&n.style instanceof Object)for(const t in n.style){const e=n.style[t];"function"==typeof e?i((()=>r.style[t]=e())):r.style[t]=e}return r}function D(e){const o=document.createDocumentFragment();return e.forEach((e=>{if(w(e)){const t=document.createTextNode(e);return t.nodeValue=e,void o.appendChild(t)}if("function"==typeof e){let r=[],c=!0,s=null;const l=document.createTextNode("");return o.appendChild(l),void i((()=>{let i=e();if(i&&t(i)&&_(i.tag))return void console.warn("不支持响应式节点片段渲染");i instanceof Array||(i=[i].filter((t=>!function(t){return[void 0,null,"",!0,!1].includes(t)}(t))));let a=0;for(;a<i.length;){const t=i[a],e=a,u=r.findIndex((t=>t.key===e));if(u>=0){if(n(t,r[u].tree)){a++;continue}const e=q(t),{tag:o,attrs:c,children:i}=r[u].tree,s=Object.assign({},c,{children:i});R(o)&&W((()=>o(s))),r[u].node.parentElement.replaceChild(e,r[u].node),R(o)&&T((()=>o(s))),r[u].tree=t,r[u].node=e}else{const n=q(t);if(c)o.appendChild(n);else if(0===r.length)s??=l.parentElement,s.insertBefore(n,l.nextSibling);else{const t=r[r.length-1].node,e=t.nextSibling;t.parentElement.insertBefore(n,e)}r.push({key:e,tree:t,node:n})}a++}if(r.length>i.length){for(let t=i.length;t<r.length;t++){const{tag:e,attrs:n,children:o}=r[t].tree,c=Object.assign({},n,{children:o});R(e)&&W((()=>e(c))),r[t].node.remove(),R(e)&&T((()=>e(c)))}r.splice(i.length,r.length-i.length)}c=!1}))}if(e instanceof Array){const t=D(e);o.appendChild(t)}else if(E(e)){const t=V(e.tag,e.attrs,e.children);o.appendChild(t)}else if("object"===t(e)&&R(e.tag)){const t=L(e.tag,e.attrs,e.children);o.appendChild(t)}else console.warn(`render: 不支持 ${e} 值渲染`)})),o}function q(e){return w(e)?document.createTextNode(e.toString()):E(e)||"object"===t(e)&&R(e.tag)?L(e.tag,e.attrs,e.children):void 0}const I="demo__bac49";function $(t){const e=t.path;let n="";for(const e in t.query)n+=`&${e}=${t.query[e]}`;return n=n?"?"+n:"",e+n+(t.hash?"#"+t.hash:"")}function B(t){return t.replace(/\/+/g,"/")}const F=u({fullPath:"",hash:"",matched:[],meta:{},name:"",query:{},path:""});function H(t){const e=new URL(t);F.path=e.pathname.replace(K,""),F.query=function(t){const e={};return t.replace("?","").split("&").forEach((t=>{const[n,o]=t.split("=");n&&o&&(e[n]=o)})),e}(e.search),F.hash=e.hash.replace("#",""),F.fullPath=F.path+e.search+e.hash,F.meta=history.state||{},F.matched=function(t){const e=[];return function n(o){for(let r=0;r<o.length;r++){const c=o[r];if(t.startsWith(c.path)){if(e.push(c),t===c.path)break;c.children&&c.children.length>0&&n(c.children)}}}(Q),e.reverse()}(F.path)}function Y(t){let e="";e="string"==typeof t?B(K+t):$(t),history.pushState({},null,e),H(location.href)}function U(t){let e="";e="string"==typeof t?B(K+t):$(t),history.replaceState({},null,e),H(location.href)}function z(t){history.go(t),H(location.href)}function G(){const t=[];return function e(n){for(let o=0;o<n.length;o++){const r=n[o];t.push(r),r.children&&r.children.length>0&&e(r.children)}}(Q),t}function J(){return{currentRoute:F,getRoutes:G,go:z,forward:()=>z(1),back:()=>z(-1),options:{history:{base:K},routes:Q},push:Y,replace:U}}let K="/dist",Q=[];function X(){const t=new h(null);return y((()=>F.path),(e=>{const n=J().getRoutes().find((t=>t.path===e));n&&(t.value=n.component)}),{immediate:!0}),m(v,null,(()=>m(t.value,null)))}function Z(t){const e="function"==typeof(n=()=>{const e=t.to;return"string"==typeof e?e:$(e)})?new p(n):new p(n.get,n.set);var n;const o=J();return m("a",{href:e.value,onclick:function(t){t.preventDefault(),o.push(e.value)}},t.children)}const tt=[{path:"/",component:function(){return m("div",{className:I},"home")}},{path:"/about",component:function(){return m("div",null,"about")}}],et=document.getElementById("root");var nt;K=(nt={base:"/dist",routes:tt}).base,Q=g(nt.routes),function t(e,n=""){e.forEach((e=>{e.path=B(n+e.path),e.children&&e.children.length>0&&t(e.children,e.path)}))}(Q),H(location.href),window.addEventListener("popstate",(()=>{H(location.href)})),y((()=>F.path),(t=>{J().getRoutes().find((e=>e.path===t))}),{immediate:!0}),J(),et.appendChild(function({tag:t,attrs:e,children:n}){const r=L(t,e,n);if(A.forEach((t=>{t()})),A.length=0,M=!0,r instanceof DocumentFragment){const t=r.children[0];o((()=>{t.parentNode&&N()}))}else r instanceof HTMLElement&&o((()=>{r.parentNode&&N()}));return r}(m((function(){return m(v,null,m("div",null,"My Vue"),m(Z,{to:{path:"/"}},"首页"),m(Z,{to:{path:"/about"}},"关于"),m(X,null))}),null)))})();