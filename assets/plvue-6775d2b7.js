var Bt=Object.defineProperty;var Ut=(t,n,e)=>n in t?Bt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var c=(t,n,e)=>(Ut(t,typeof n!="symbol"?n+"":n,e),e),dt=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var pt=(t,n,e)=>(dt(t,n,"read from private field"),e?e.call(t):n.get(t)),gt=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},k=(t,n,e,r)=>(dt(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e);function tt(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function _(t){return["object","array"].includes(tt(t))}function qt(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function et(t,n){if(_(t)&&_(n)){const e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;for(const s of e)if(!r.includes(s)||!et(t[s],n[s]))return!1;return!0}else return t===n}function g(t){return tt(t)==="object"}function V(t){return Array.isArray(t)}function z(t){return typeof t=="string"}function R(t){Promise.resolve().then(t)}function Kt(){return Number(Math.random().toString().slice(2)).toString(32)}function S(...t){console.warn(...t)}let $=null;const W=new WeakMap;function T(t){$=t,t(),$=null}function zt(t){const n=W.get(t)||[],e=n.some(r=>$===r);$&&!e&&(n.push($),W.set(t,n))}function yt(t){const n=W.get(t);n&&n.forEach((e,r)=>{const s=e();typeof s=="boolean"&&s&&(n.splice(r,1),W.set(t,n))})}function jt(t){return Reflect.defineProperty(t,w.IS_READONLY,{value:!0}),new Proxy(t,{get(n,e){return e===w.RAW?n:Reflect.get(n,e)},set(n,e,r){const s=Reflect.get(n,e);return S(`Set operation on key '${e.toString()}' failed: target is readonly.`,{[e.toString()]:s}),s},deleteProperty(n,e){const r=Reflect.get(n,e);return S(`Delete operation on key '${e.toString()}' failed: target is readonly.`,{[e.toString()]:r}),r}})}function Yt(t){return t&&jt(t)[w.IS_READONLY]}const kt=new WeakMap,H=new WeakMap,w={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function N(t){if(!_(t)||Object.isFrozen(t))return S(`lue cannot be made reactive: ${t}`),t;if(kt.get(t))return t;let n=null;return new Proxy(t,{get(e,r,s){if(r===w.RAW)return e;if(_(e[r]))return N(e[r]);const o=Reflect.get(e,r,s);return zt(e),o},set(e,r,s,o){if(e[w.IS_READONLY])return!0;if(_(e[r])){const l=e[r],a=new Set;for(const h in s)a.add(h),this.set(l,h,s[h],o[r]);for(const h in l)a.has(h)||this.deleteProperty(l,h);return!0}if(Reflect.get(e,r,o)===s)return!0;const u=Reflect.set(e,r,s,o),f=H.get(e)||new Set;f.add(r);const y=f.size;return H.set(e,f),R(()=>{const l=Reflect.get(e,r,o);u&&l===s&&y===1&&yt(e),H.delete(e)}),u},deleteProperty(e,r){const s=Reflect.get(e,r);if(_(s)){for(const u in s)this.deleteProperty(s,u);return!0}const o=qt(e,r),i=Reflect.deleteProperty(e,r);return n=r,R(()=>{o&&i&&s!==void 0&&r===n&&(yt(e),n=null)}),i}})}function nt(t){return!!t[w.RAW]}function Ht(t){return nt(t)?t[w.RAW]:t}function Jt(t){return nt(t)||Yt(t)}function Qt(t){return _(t)&&kt.set(t,!0),t}function Ot(t){const n=N({value:t});function e(){return n.value}function r(s){n.value=s}return[e,r]}const rt="__v_isRef";var Oe;class Mt{constructor(n){c(this,Oe,!0);c(this,"__v_isShallow",!1);c(this,"_rawValue");c(this,"_value");c(this,"getSignal");c(this,"setSignal");this._rawValue=n;const[e,r]=Ot(n);this.getSignal=e,this.setSignal=r,this._value=e()}get value(){return this.getSignal()}set value(n){this.setSignal(n),this._rawValue=n}}Oe=rt;function Gt(t){return new Mt(t)}function Tt(t){return t&&!!t[rt]}function Xt(t){return Tt(t)?t.value:t}class Ct{constructor(n,e,r=void 0){c(this,"__v_isRef",!0);c(this,"_defaultValue");c(this,"_key");c(this,"_object");this._defaultValue=r,this._key=e,this._object=n}get value(){return this._object[this._key]}set value(n){this._object[this._key]=n}}function Zt(t,n,e=void 0){return new Ct(t,n,e)}function vt(t){const n={};for(const e in t)n[e]=new Ct(t,e);return n}class te extends Mt{constructor(e){let r=!1;const{get:s,set:o}=e(()=>r=!0,()=>this.setValue());super(s());c(this,"_get");c(this,"_set");this.__v_isRef=r,this._get=s,this._set=o}get value(){return this.__v_isRef?super.value:this._get()}set value(e){this._set(e)}setValue(){super.value=this._get()}}function ee(t){return new te(t)}class ne{constructor(n){c(this,"fn");this.fn=n}}var Me;class mt{constructor(n,e){c(this,"__v_isReadonly",!0);c(this,Me,!0);c(this,"_cacheable",!0);c(this,"_dirty",!0);c(this,"computed");c(this,"_setter");this.computed=new ne(n),this._setter=e}get value(){return this.computed.fn()}set value(n){this._setter?this._setter(n):S("Write operation failed: computed value is readonly")}}Me=rt;function re(t){return typeof t=="function"?new mt(t):new mt(t.get,t.set)}const O=function(){const t=new WeakMap,n=["null","weakset","weakmap"],e={set(r){const s=new Set;for(const o of r)s.add(O(o));return s},map(r){const s=new Map;for(const[o,i]of r.entries())s.set(o,O(i));return s}};return function(r){const s=tt(r);if(typeof r!="object"||n.includes(s))return r;if(t.has(r))return t.get(r);if(e[s])return e[s](r);const o=V(r)?[]:{};Object.setPrototypeOf(o,Object.getPrototypeOf(r)),t.set(r,o);for(const i in r)o[i]=O(r[i]);return o}}();function C(t,n){return Object.assign({},t,n)}function ot(t,n,e={}){let r=!1;if(r)return;const s=t();e.immediate&&n(s,void 0);let o=O(s);return T(()=>{const i=t();if(_(i)&&e.deep){et(i,o)||(n(i,o),o=O(i));return}i!==o&&(n(i,o),o=i)}),()=>{r=!0}}function oe(t){let n=!1,e=!1;return T(()=>{if(n)return!0;t(r=>{e&&r(),e=!0})}),()=>{n=!0}}function A(t){return["string","number"].includes(typeof t)&&t!==""}function xt(t){return!/^on/.test(t)}function st(t){return g(t)&&(z(t.tag)||P(t.tag))}function d(t){return typeof t=="function"&&!P(t)}function it(t){return[void 0,null,"",!0,!1].includes(t)}function F(t){return document.createTextNode(t)}function p(t,n,...e){const r={tag:t,attrs:n||{},children:e};return d(r.tag)&&r.children.length===0&&r.attrs.children&&(r.children=r.attrs.children),r}function Y({children:t}){return t}const D=Symbol("Fragment");Y.prototype[D]=D;function P(t){return typeof t=="function"&&t.prototype[D]===D}let I=!1;function _t(t){I=t}const J=[];let Nt=!1;function At(t){if(!I){if(Nt){R(t);return}J.push(t)}}function Rt(){J.forEach(t=>{t()}),J.length=0,Nt=!0}const Pt=new WeakMap;function $t(t,n=[]){return t.forEach(e=>{g(e)&&(d(e.tag)?n.push({comp:e.tag,compId:e.tag.prototype._id,props:C(e.attrs,{children:t})}):A(e.tag)&&$t(e.children,n))}),n}function ct(t,n=[]){const e=Pt.get(t)||[];return n.push(...e),e.forEach(r=>{const s=ct(r.comp);n.push(...s)}),n}const Q=new Map;function se(t,n){if(I)return;const e=t.prototype._id,r=Q.get(e)||[];r.some(o=>o===n)||(r.push(n),Q.set(e,r))}function St(t){const n=ct(t).map(r=>r.compId);n.unshift(t.prototype._id);const e=[];n.forEach(r=>{const s=Q.get(r)||[];e.push(...s)}),e.forEach(r=>{r()})}const G=[];let Vt=!1;function ie(t){if(!I){if(Vt){t();return}G.push(t)}}function ce(){G.forEach(t=>{t()}),G.length=0,Vt=!0}const X=new Map;function ue(t,n){if(I)return;const e=t.prototype._id,r=X.get(e)||[];r.some(o=>o===n)||(r.push(n),X.set(e,r))}function bt(t){const n=ct(t).map(r=>r.compId);n.unshift(t.prototype._id);const e=[];n.forEach(r=>{const s=X.get(r)||[];e.push(...s)}),e.forEach(r=>{r()})}function E(t,n,e){if(z(t))return ut(t,n,e);if(P(t))return B(e);if(d(t)){const r=C(n,{children:e});t.prototype._id=Kt();const s=t(r);return A(s)?F(s):(Pt.set(t,$t(s.children)),E(s.tag,s.attrs,s.children))}}function ut(t,n={},e=[""]){if(P(t))return E(t,n,e);const r=document.createElement(t);e.forEach(s=>{if(!it(s)){if(A(s)){const o=F(s);o.nodeValue=s,r.appendChild(o);return}if(typeof s=="function"){const o=B([s]);r.appendChild(o);return}if(V(s)){const o=B(s);r.appendChild(o);return}if(st(s)){const o=ut(s.tag,s.attrs,s.children);r.appendChild(o);return}if(g(s)&&d(s.tag)){const o=E(s.tag,s.attrs,s.children);r.appendChild(o);return}S(`render: 不支持 ${s} 值渲染`)}});for(const s in n){const o=n[s];r[s]=o,s==="ref"&&(o.value=r),typeof o=="function"&&xt(s)&&T(()=>{r[s]=o()})}if(n.style&&g(n.style))for(const s in n.style){const o=n.style[s];typeof o=="function"?T(()=>r.style[s]=o()):r.style[s]=o}return r}function B(t){const n=document.createDocumentFragment();return t.forEach(e=>{if(!it(e)){if(A(e)){const r=F(e);r.nodeValue=e,n.appendChild(r);return}if(typeof e=="function"){fe(n,e);return}if(V(e)){const r=B(e);n.appendChild(r);return}if(st(e)){const r=ut(e.tag,e.attrs,e.children);n.appendChild(r);return}if(g(e)&&d(e.tag)){const r=E(e.tag,e.attrs,e.children);n.appendChild(r);return}S(`render: 不支持 ${e} 值渲染`)}}),n}function wt(t){if(A(t))return F(t);if(st(t)||g(t)&&d(t.tag))return E(t.tag,t.attrs,t.children)}function fe(t,n){let e=[],r=!0,s=null;const o=F("");t.appendChild(o),T(()=>{let i=n();if(i&&g(i)&&P(i.tag)){S("不支持响应式节点片段渲染");return}V(i)||(i=[i]),i=i.filter(f=>!it(f));let u=0;for(;u<i.length;){let f=i[u];const y=u,l=e.findIndex(a=>a.key===y);if(l>=0){if(et(f,e[l].tree)){u++;continue}const a=wt(f);if(!a){i.splice(l,1),u++;continue}const h=e[l].tree;d(h.tag)&&bt(h.tag),e[l].node.parentElement.replaceChild(a,e[l].node),d(h.tag)&&St(h.tag),e[l].tree=f,e[l].node=a}else{const a=wt(f);if(!a){u++;continue}if(r)t.appendChild(a);else if(e.length===0)s??(s=o.parentElement),s.insertBefore(a,o.nextSibling);else{const h=e[e.length-1].node,Dt=h.nextSibling;h.parentElement.insertBefore(a,Dt)}e.push({key:y,tree:f,node:a})}u++}if(e.length>i.length){for(let f=i.length;f<e.length;f++){const y=e[f].tree;d(y.tag)&&bt(y.tag),e[f].node.remove(),d(y.tag)&&St(y.tag)}e.splice(i.length,e.length-i.length)}r=!1})}function ft(t,n={},e=[""]){if(P(t)){const o=C(n,{children:e}),i=t(o);return U(i)}if(d(t)){const o=C(n,{children:e}),i=t(o);return ft(i.tag,i.attrs,i.children)}let r="";for(const o in n){if(o.startsWith("on")||o==="ref")continue;let i=typeof n[o]=="function"&&xt(o)?n[o]():n[o];if(o==="className"){r+=` class=${i}`;continue}if(o==="style"&&g(i)){for(const u in i)typeof i[u]=="function"&&(i[u]=i[u]());i='"'+JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(",",";")+'"'}r+=` ${o}=${i}`}const s=U(e);return`<${t}${r}>${s}</${t}>`}function U(t){let n="";return t.forEach(e=>{if(A(e)){n+=e.toString();return}if(V(e)){n+=U(e);return}if(typeof e=="function"){const r=e();n+=U([r]);return}if(g(e)){n+=ft(e.tag,e.attrs,e.children);return}S(`renderToString: 不支持 ${e} 值渲染`)}),n}function le({tag:t,attrs:n,children:e}){const r=E(t,n,e);if(ce(),r instanceof DocumentFragment){const s=r.children[0];R(()=>{s.parentNode&&Rt()})}else r instanceof HTMLElement&&R(()=>{r.parentNode&&Rt()});return r}function ae({tag:t,attrs:n,children:e}){_t(!0);const r=ft(t,n,e);return _t(!1),r}const Ce=Object.freeze(Object.defineProperty({__proto__:null,Fragment:Y,binding:T,computed:re,createSignal:Ot,customRef:ee,h:p,isProxy:Jt,isReactive:nt,isRef:Tt,markRaw:Qt,nextTick:R,onBeforeMount:ie,onBeforeUnmount:ue,onMounted:At,onUnmounted:se,reactive:N,readonly:jt,ref:Gt,render:le,renderToString:ae,toRaw:Ht,toRef:Zt,toRefs:vt,unref:Xt,watch:ot,watchEffect:oe},Symbol.toStringTag,{value:"Module"}));let b="",j,lt=!0,Z="";function he(t){b=t.base||"/",/(^\/$|^\/.+\/$)/.test(b)||S("base 必须以 / 开头 / 结尾"),j=t.mode||"history",lt=t.isBrowser??!0,Z=t.SSR_DATA_KEY||"g_initialProps"}function at(t){if(z(t))return t;t=t;const n=t.path;let e="";for(const o in t.query)e+=`&${o}=${t.query[o]}`;e=e?"?"+e:"";const r=t.hash?"#"+t.hash:"";return n+e+r}function de(t){const n={};return t.replace("?","").split("&").forEach(r=>{const[s,o]=r.split("=");s&&o&&(n[s]=o)}),n}function L(t){return t.replace(/\/+/g,"/")}const M=N({path:"",query:{},hash:"",meta:{}});function x(t){const n=new URL(L("http://0.0.0.0/"+t));M.path=n.pathname.replace(b,"/"),M.query=de(n.search),M.hash=n.hash}function pe(){if(!M.path&&lt){let t="";j==="history"?t=location.href.replace(location.origin+b,""):t=location.hash.slice(1),x(t)}return M}function ge(t){const n=at(t);j==="history"?history.pushState({},"",L(b+"/"+n)):location.hash=n,x(n)}function ye(t){const n=at(t);j==="history"?history.replaceState({},"",L(b+"/"+n)):location.hash=n,x(n)}function me(t){history.go(t)}function ht(){return{push:ge,replace:ye,go:me}}function Ft(t){t.exact??(t.exact=!0);const n=t.component;return p(n,null)}const q=Symbol("Route");Ft.prototype[q]=q;function v(t){return typeof t=="function"&&t.prototype[q]===q}function _e(t){const n=ht();return At(()=>{n.replace(t.to)}),p("div",null)}function It(t,n){const e=t.find(o=>o.attrs.exact||o.attrs.exact===void 0?n===o.attrs.path:(n+"/").startsWith(L(o.attrs.path+"/")));if(!e)return null;const r={tag:"",attrs:{},children:[]};r.tag=e.attrs.component;const s=[It(e.children,n)].filter(o=>o);if(r.children=s,s.length===0){const o=e.children[e.children.length-1];o&&v(o.tag)&&!o.attrs.path&&(r.children=[C(r,{tag:o.attrs.component})])}if(e.attrs.exact===!1&&r.children.length===0){const o=t[t.length-1];if(o&&v(o.tag)&&!o.attrs.path)return r.tag=o.attrs.component,r}return r}let Et=!0;function Lt(t,n=!0){const e=N({tag:"",attrs:{},children:[]});return ot(()=>M.path,async r=>{const s=t.children.filter(i=>g(i)&&v(i.tag)),o=It(s,r);if(o){n&&typeof o.tag.prototype.getInitialProps=="function"&&(Et&&window[Z]?(delete window[Z],Et=!1):t.Loading&&(e.tag=t.Loading));for(const i in o)e[i]=o[i]}},{immediate:!0}),{currentTree:e}}function Wt(t){const n=t(),e=n.tag;return p(Y,null,()=>p(e,null,n.children[0]&&Wt(()=>n.children[0])))}function Re(t){function n(){return j==="history"?location.href.replace(location.origin+b,""):location.hash.slice(1)}x(n()),window.addEventListener("popstate",()=>{x(n())});const{currentTree:e}=Lt(t);return Wt(()=>e)}function Se(t){let n="";if(j==="history")n=t.url.replace(b,"");else{const r=t.url.match(/#.*/);n=r?r[0]:""}x(n);const{currentTree:e}=Lt({children:t.children,url:n},!1);return p("tier",{tree:()=>e})}function be(t){return p(Y,null,lt?p(Re,{...t}):p(Se,{...t}))}const we={to:"/",type:"push"};function Ee(t){t=C(we,t);const n=z(t.to)?t.to:at(t.to),e=L(b+(j==="hash"?"#"+n:n)),r=ht();function s(o){o.preventDefault(),t.type==="push"?r.push(n):r.replace(n)}return p("a",{href:e,onclick:s},t.children)}const xe=Object.freeze(Object.defineProperty({__proto__:null,Link:Ee,Redirect:_e,Route:Ft,Router:be,initRouter:he,useRoute:pe,useRouter:ht},Symbol.toStringTag,{value:"Module"})),K=Symbol("action");function je(t){return typeof t=="function"&&t.prototype[K]===K}var m;class ke{constructor(n,e){c(this,"state");c(this,"actions");gt(this,m,!0);this.state=N(O(n)),ot(()=>this.state,()=>{pt(this,m)&&this._merge(n)},{deep:!0}),this.actions={};for(const r in e){let s=function(...i){k(o,m,!1);const u=e[r](...i);o._merge(n),_(u)&&u[Symbol.toStringTag]==="Promise"?u.then(()=>{o._merge(n),R(()=>k(o,m,!0))}):(o._merge(n),R(()=>k(o,m,!0)))};const o=this;s.prototype[K]=K,this.actions[r]=s}}_merge(n){const e=Object.keys(n);for(const r in n)this.state[r]=n[r];for(const r in this.state)je(this.state[r])||!e.includes(r)&&delete this.state[r]}get store(){k(this,m,!1);const n=Object.assign(this.state,this.actions);return R(()=>k(this,m,!0)),n}}m=new WeakMap;function Ne(t,n){return()=>new ke(t,n).store}export{Y as F,Ee as L,be as R,re as a,xe as b,Ne as c,Ft as d,le as e,p as h,he as i,se as o,Gt as r,Ce as v};
