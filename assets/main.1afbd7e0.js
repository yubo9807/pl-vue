(()=>{"use strict";function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(t){return"object"==typeof t}function n(t){return["string","number"].includes(typeof t)&&""!==t}let o=null;const r=new WeakMap;function c(t){o=t,t(),o=null}function l(t){const e=r.get(t);e&&e.forEach(((n,o)=>{const c=n();"boolean"==typeof c&&c&&(e.splice(o,1),r.set(t,e))}))}const u=new WeakMap,i={RAW:Symbol("__v_raw"),IS_READONLY:Symbol("__v_isReadonly")};function a(t){return!e(t)||u.get(t)?t:new Proxy(t,{get(t,n,c){if(n===i.RAW)return t;!function(t){const e=r.get(t)||[];o&&e.push(o),r.set(t,e)}(t);const l=Reflect.get(t,n,c);return e(l)?a(l):l},set(t,e,n,o){const r=Reflect.get(t,e,o),c=Reflect.set(t,e,n,o);return t[i.IS_READONLY]?r:(c&&r!==n&&l(t),c)},deleteProperty(t,e){const n=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,e),o=Reflect.deleteProperty(t,e);return n&&o&&l(t),o}})}class s{__v_isRef=!0;__v_isShallow=!1;_rawValue;_value;constructor(t){this._rawValue=t,this._value=e(t)?a(t):a({value:t})}get value(){return e(this._rawValue)?this._value:this._value.value}set value(t){this._rawValue=t,e(t)?this._value=t:this._value.value=t}}function f(t,e,...n){return{tag:t,attrs:e||{},children:n}}function d({children:t}){return t}const p=Symbol("Fragment");function h(t){return"function"==typeof t&&t.prototype[p]===p}function y(e){return e instanceof Array?function(t){let e=new Array(t.length);for(let n=0;n<e.length;n++)e[n]=y(t[n]);return e}(e):"object"===t(e)?function(t){let e={},n=Object.getOwnPropertyNames(t);for(let o=0;o<n.length;o++)e[n[o]]=y(t[n[o]]);return e}(e):e}function g(e,n={},o=[]){if("function"==typeof e&&!h(e)){const t=e(y(Object.assign({},n,{children:o})));return g(t.tag,t.attrs,t.children)}const r=[];return o.forEach((e=>{if("object"===t(e)){const t=g(e.tag,e.attrs,e.children);r.push(t)}else r.push(e)})),{tag:e,attrs:n,children:r}}function _(t,e,n){return"string"==typeof t?v(t,e,n):h(t)?m(n):void 0}function v(e,o={},r=""){if(h(e))return _(e,o,r);const l=document.createElement(e);r.forEach((e=>{if(n(e)){const t=document.createTextNode(e);return t.nodeValue=e,void l.appendChild(t)}if("function"!=typeof e)if(e instanceof Array){const t=m(e);l.appendChild(t)}else if("object"!==t(e));else{const t=v(e.tag,e.attrs,e.children);l.appendChild(t)}else{const t=m([e]);l.appendChild(t)}}));for(const t in o)l[t]=o[t];if(o.style&&o.style instanceof Object)for(const t in o.style){const e=o.style[t];"function"==typeof e?c((()=>l.style[t]=e())):l.style[t]=e}return l}function m(e){const o=document.createDocumentFragment();return e.forEach((e=>{if(n(e)){const t=document.createTextNode(e);return t.nodeValue=e,void o.appendChild(t)}if("function"==typeof e){const r=document.createTextNode("");let l=null;return c((()=>{const c=e();if(n(c))r.nodeValue=c.toString(),null!==l&&l.parentElement.replaceChild(r,l),l=r;else if("object"===t(c)){const t=_(c.tag,c.attrs,c.children);l?l.parentElement.replaceChild(t,l):o.appendChild(t),l=t}else c instanceof Array&&console.warn("暂不支持直接返回一个数组，请包裹一层标签")})),void o.appendChild(r)}if(e instanceof Array){const t=m(e);o.appendChild(t)}else if("object"!==t(e));else{const t=v(e.tag,e.attrs,e.children);o.appendChild(t)}})),o}d.prototype[p]=p;const b="demo__bac49";function w(t){return console.log(t.children),f("div",null,f("p",null,"子组件"),f("p",null,"props: ",t.count),f("p",null,t.children))}document.getElementById("root").appendChild(function({tag:t,attrs:e,children:n}){const o=g(t,e,n);return _(o.tag,o.attrs,o.children)}(f((function(){const t=new s(1);return f(d,null,"父组件",f("h1",{className:b},(()=>t.value)),f(w,{count:()=>t.value},f("p",null,"插槽1"),f("p",null,"插槽2")),f("button",{onclick:()=>t.value++},"click"))}),null)))})();