function t(...t){console.warn(...t)}function e(t){return t.length}function n(t){return Object.prototype.toString.call(t).slice(8,-1)}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,n){if(u(t)&&u(n)){const r=Object.keys(t),u=Object.keys(n);if(e(r)!==e(u))return!1;for(const e of r){if(!u.includes(e))return!1;if(!o(t[e],n[e]))return!1}return!0}return t===n}function u(t){return"object"==typeof t&&null!==t}function s(t){return function(t){return"Object"===n(t)}(t)||"Array"===n(t)}function i(t){return"function"==typeof t}function c(t){Promise.resolve().then(t)}class l extends WeakMap{}function f(t,e={}){const r=new l,o=["Null","Regexp","Date","WeakSet","WeakMap"],u=Object.assign({Function(t){const e=function(...e){return t.apply(this,e)};return e.prototype=s(t.prototype),e},Set(t){const e=new Set;for(const n of t)e.add(s(n));return e},Map(t){const e=new Map;for(const[n,r]of t.entries())e.set(n,s(r));return e}},e);function s(t){if("object"==typeof window&&t instanceof HTMLElement)return t.cloneNode(!0);const e=n(t);if(!["object","function"].includes(typeof t)||o.includes(e))return t;if(r.has(t))return r.get(t);if(u[e])return u[e](t);const i=(c=t,Array.isArray(c)?[]:{});var c;Object.setPrototypeOf(i,Object.getPrototypeOf(t)),r.set(t,i);for(const e in t)t.hasOwnProperty(e)&&(i[e]=s(t[e]));return i}return s(t)}function a(t,n){let r=0;for(;r<e(t);)n(t[r],r),r++}function h(t,n){const r=function(t,n){let r=0;for(;r<e(t);){if(n(t[r],r))return r;r++}return-1}(t,n);return t[r]}let d=null;const _=new l;function p(t){d=t,t(),d=null}let y=null;function v(t,e){if(!d)return;const n=_.get(t)||[],r=h(n,(t=>d===t.fn));if(r)r.s.add(e),y=r.s;else{const r=new Set([e]);n.push({s:r,fn:d}),_.set(t,n),y=r}c((()=>y=null))}function w(t,e){const n=_.get(t);n&&(a(n,((t,r)=>{!0===t.fn(e)&&delete n[r]})),_.set(t,n.filter((t=>t))))}function g(...t){a(t,(function t(e){const n=$(e);for(const e in n){const r=n[e];u(r)&&t(r)}_.delete(n)}))}function b(t){for(const e in t){v(t,e);const n=t[e];s(n)&&b(n)}}function S(t){w(t,new Set(Object.keys(t)))}function j(t){S(t);for(const e in t){const n=t[e];s(n)&&j(n)}}const m=Symbol("__v_raw"),O=Symbol("__v_isRef"),k=Symbol("__v_isShallow"),R=Symbol("__v_isBest"),P=Symbol("__v_isReadonly");function V(e,n={}){const u=n.readonly,i=n.best,l=n.shallow;u&&Reflect.defineProperty(e,P,{value:!0});const f=new Set;return new Proxy(e,{get(t,e,r){if(e===m)return t;const o=Reflect.get(t,e);return u?o:l?(b(t),o):(v(t,e),i?o:s(o)?V(o,n):o)},set(e,n,r,s){if(e[P])return!0;const i=Reflect.get(e,n);if(u)return t(`Set operation on key '${n.toString()}' failed: target is readonly.`,{[n.toString()]:i}),!0;if(o(i,r))return!0;const l=Reflect.set(e,n,r);f.add(n);const a=f.size;return c((()=>{if(a<f.size)return;const t=Reflect.get(e,n);l&&!o(i,t)&&w(e,f),f.clear()})),l},deleteProperty(e,n){if(!r(e,n))return!0;const s=Reflect.get(e,n);if(u)return t(`Delete operation on key '${n.toString()}' failed: target is readonly.`,{[n.toString()]:s}),!0;const i=Reflect.deleteProperty(e,n);f.add(n);const l=f.size;return c((()=>{if(l<f.size)return;const t=r(e,n),u=Reflect.get(e,n);!i||t||o(s,u)||w(e,f),f.clear()})),i}})}function M(t){return V(t,{readonly:!0})}function x(t){return V(t,{shallow:!0,readonly:!0})}const z=new l;function W(e){return!s(e)||Object.isFrozen(e)?(t(`lue cannot be made reactive: ${e}`),e):z.get(e)?e:V(e)}function A(t){return u(t)&&!!t[m]}function $(t){return A(t)?t[m]:t}function D(t){return A(t)||function(t){return t&&M(t)[P]}(t)}function F(t){return u(t)&&z.set(t,!0),t}function N(t){return V(t,{shallow:!0})}class B{[O]=!0;[k]=!1;[R]=!1;_rawValue;_value;constructor(t,e=0){const n=1===e,r=2===e;this[k]=n,this[R]=r,this._rawValue=t,this._value=V({value:t},{shallow:n,best:r})}get value(){return this._value.value}set value(t){this._rawValue=t,this._value.value=t}}function E(t=void 0){return new B(t)}function H(t=void 0){return new B(t,2)}function L(t=void 0){return new B(t,1)}function T(t){j(C(t))}function q(t){return t&&!!t[O]}function C(t){return q(t)?t.value:t}class G{[O]=!0;_defaultValue;_key;_object;constructor(t,e,n=void 0){this._defaultValue=n,this._key=e,this._object=t}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function I(t,e,n=void 0){return new G(t,e,n)}function J(t){const e={};for(const n in t)e[n]=new G(t,n);return e}class K extends B{_get;_set;constructor(t){let e=!1;const{get:n,set:r}=t((()=>e=!0),(()=>this.setValue()));super(n()),this[O]=e,this._get=n,this._set=r}get value(){return this[O]?super.value:this._get()}set value(t){this._set(t)}setValue(){super.value=this._get()}}function Q(t){return new K(t)}function U(t){const e={value:t},n=W(e);return[function(){return n.value},function(t){n.value=t},e]}class X{fn;computed;active=!0;constructor(t){this.fn=t;let e=t();this.computed=new K(((t,n)=>({get:()=>(t(),e),set:t=>{e=t,n()}}))),this.scheduler()}scheduler(){p((()=>{if(!this.active)return!0;this.computed.value=this.run()}))}run(){return this.fn()}stop(){this.active=!1}}let Y;const Z=new Map;function tt(t){if(!Y)return;const e=Z.get(Y)||[];e.push(t),Z.set(Y,e)}class et{#t=Symbol();run(t){Y=this.#t;const e=t();return Y=null,e}stop(){const t=Z.get(this.#t);t&&(a(t,(t=>{t instanceof rt?t.effect.stop():t()})),Z.delete(this.#t))}}function nt(){return new et}class rt{[P]=!0;[O]=!0;_cacheable=!0;effect;_setter;_value;_dirty;constructor(t,e,n=!1){this.effect=new X(t),this._setter=e,this._dirty=n}get value(){return this._dirty?this.effect.computed.value:this.effect.fn()}set value(e){this._setter?this._setter(e):t("Write operation failed: computed value is readonly")}}function ot(t){let e;return e=i(t)?new rt(t,null,!0):new rt(t.get,t.set,!0),tt(e),e}function ut(t,e,n){return function(t,e,n={}){let r=!1;if(r)return;const u=t();n.immediate&&e(u,void 0);let i=f(u),c=!0;p((()=>{if(r)return!0;const u=t();s(u)?n.deep&&!o(u,i)&&(e(u,i),i=f(u)):c?c=!1:u!==i&&(e(u,i),i=u)}));const l=()=>{r=!0,i=t=e=n=null};return tt(l),l}(i(t)?t:q(t)?()=>t.value:()=>t,e,n)}function st(t){let e=!1,n=!0,r=0,o=null;p((u=>{if(e)return!0;if(!(r>0)){if(r++,c((()=>r=0)),!n)for(const t of u)if(!o.has(t))return;t((t=>{t()})),n&&(o=y,n=!1)}}));const u=()=>{e=!0,t=o=null};return tt(u),u}export{B as RefImpl,H as bestRef,p as binding,ot as computed,U as createSignal,Q as customRef,j as deepTriggerObject,nt as effectScope,D as isProxy,A as isReactive,q as isRef,F as markRaw,W as reactive,M as readonly,g as recycleDepend,E as ref,N as shallowReactive,x as shallowReadonly,L as shallowRef,$ as toRaw,I as toRef,J as toRefs,S as triggerObject,T as triggerRef,C as unref,ut as watch,st as watchEffect};
